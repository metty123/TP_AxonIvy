[Ivy]
[>Created: Wed Aug 12 11:28:40 ICT 2015]
115DB4695CDE5E26 3.17 #module
>Proto >Proto Collection #zClass
Ds0 DatabaseProcess Big #zClass
Ds0 RD #cInfo
Ds0 #process
Ds0 @MessageFlowInP-0n messageIn messageIn #zField
Ds0 @MessageFlowOutP-0n messageOut messageOut #zField
Ds0 @TextInP .resExport .resExport #zField
Ds0 @TextInP .type .type #zField
Ds0 @TextInP .processKind .processKind #zField
Ds0 @AnnotationInP-0n ai ai #zField
Ds0 @TextInP .xml .xml #zField
Ds0 @TextInP .responsibility .responsibility #zField
Ds0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ds0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ds0 @RichDialogInitStart f0 '' #zField
Ds0 @RichDialogProcessEnd f1 '' #zField
Ds0 @RichDialogProcessStep f3 '' #zField
Ds0 @PushWFArc f4 '' #zField
Ds0 @RichDialogProcessStep f7 '' #zField
Ds0 @PushWFArc f8 '' #zField
Ds0 @PushWFArc f2 '' #zField
Ds0 @RichDialogProcessStart f9 '' #zField
Ds0 @RichDialogProcessEnd f12 '' #zField
Ds0 @RichDialogProcessStart f14 '' #zField
Ds0 @RichDialogProcessStep f15 '' #zField
Ds0 @RichDialogProcessEnd f17 '' #zField
Ds0 @RichDialogProcessStart f19 '' #zField
Ds0 @RichDialog f20 '' #zField
Ds0 @PushWFArc f21 '' #zField
Ds0 @RichDialogProcessEnd f22 '' #zField
Ds0 @PushWFArc f23 '' #zField
Ds0 @RichDialogMethodStart f24 '' #zField
Ds0 @RichDialogMethodStart f25 '' #zField
Ds0 @PushWFArc f26 '' #zField
Ds0 @RichDialogEnd f27 '' #zField
Ds0 @RichDialogProcessStart f5 '' #zField
Ds0 @PushWFArc f6 '' #zField
Ds0 @RichDialogProcessStart f29 '' #zField
Ds0 @PushWFArc f30 '' #zField
Ds0 @RichDialogBroadcastStart f31 '' #zField
Ds0 @Alternative f32 '' #zField
Ds0 @PushWFArc f33 '' #zField
Ds0 @RichDialogProcessEnd f35 '' #zField
Ds0 @RichDialogBroadcastStart f37 '' #zField
Ds0 @Alternative f38 '' #zField
Ds0 @PushWFArc f39 '' #zField
Ds0 @PushWFArc f40 '' #zField
Ds0 @RichDialogProcessStep f42 '' #zField
Ds0 @PushWFArc f43 '' #zField
Ds0 @PushWFArc f44 '' #zField
Ds0 @RichDialogMethodStart f34 '' #zField
Ds0 @RichDialogProcessEnd f45 '' #zField
Ds0 @PushWFArc f46 '' #zField
Ds0 @RichDialogEnd f50 '' #zField
Ds0 @PushWFArc f51 '' #zField
Ds0 @RichDialogProcessEnd f28 '' #zField
Ds0 @PushWFArc f52 '' #zField
Ds0 @RichDialogEnd f36 '' #zField
Ds0 @PushWFArc f53 '' #zField
Ds0 @RichDialogMethodStart f41 '' #zField
Ds0 @RichDialog f56 '' #zField
Ds0 @RichDialogProcessEnd f11 '' #zField
Ds0 @RichDialogInitStart f60 '' #zField
Ds0 @PushWFArc f61 '' #zField
Ds0 @RichDialogInitStart f10 '' #zField
Ds0 @PushWFArc f13 '' #zField
Ds0 @RichDialogProcessStep f72 '' #zField
Ds0 @PushWFArc f62 '' #zField
Ds0 @Alternative f63 '' #zField
Ds0 @PushWFArc f73 '' #zField
Ds0 @RichDialog f74 '' #zField
Ds0 @PushWFArc f57 '' #zField
Ds0 @PushWFArc f75 '' #zField
Ds0 @Alternative f76 '' #zField
Ds0 @RichDialogProcessStep f77 '' #zField
Ds0 @PushWFArc f78 '' #zField
Ds0 @PushWFArc f79 '' #zField
Ds0 @PushWFArc f80 '' #zField
Ds0 @PushWFArc f81 '' #zField
Ds0 @RichDialog f54 '' #zField
Ds0 @RichDialogProcessStep f55 '' #zField
Ds0 @RichDialog f64 '' #zField
Ds0 @Alternative f67 '' #zField
Ds0 @PushWFArc f68 '' #zField
Ds0 @PushWFArc f69 '' #zField
Ds0 @PushWFArc f71 '' #zField
Ds0 @RichDialogProcessStart f65 '' #zField
Ds0 @PushWFArc f66 '' #zField
Ds0 @RichDialogProcessEnd f70 '' #zField
Ds0 @PushWFArc f82 '' #zField
Ds0 @RichDialogFireEvent f84 '' #zField
Ds0 @PushWFArc f85 '' #zField
Ds0 @PushWFArc f83 '' #zField
Ds0 @RichDialogFireEvent f86 '' #zField
Ds0 @PushWFArc f87 '' #zField
Ds0 @PushWFArc f58 '' #zField
Ds0 @RichDialogProcessStep f47 '' #zField
Ds0 @Alternative f49 '' #zField
Ds0 @PushWFArc f88 '' #zField
Ds0 @PushWFArc f16 '' #zField
Ds0 @RichDialog f89 '' #zField
Ds0 @PushWFArc f90 '' #zField
Ds0 @RichDialogProcessEnd f91 '' #zField
Ds0 @PushWFArc f92 '' #zField
Ds0 @Alternative f93 '' #zField
Ds0 @PushWFArc f94 '' #zField
Ds0 @RichDialog f95 '' #zField
Ds0 @RichDialog f97 '' #zField
Ds0 @PushWFArc f98 '' #zField
Ds0 @PushWFArc f99 '' #zField
Ds0 @PushWFArc f100 '' #zField
Ds0 @PushWFArc f96 '' #zField
Ds0 @PushWFArc f48 '' #zField
Ds0 @Alternative f18 '' #zField
Ds0 @PushWFArc f101 '' #zField
Ds0 @PushWFArc f59 '' #zField
Ds0 @RichDialog f102 '' #zField
Ds0 @PushWFArc f103 '' #zField
Ds0 @PushWFArc f104 '' #zField
>Proto Ds0 Ds0 DatabaseProcess #zField
Ds0 f0 guid 115DB53763967E7D #txt
Ds0 f0 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f0 method start(ch.ivyteam.ivy.db.IExternalDatabase) #txt
Ds0 f0 disableUIEvents false #txt
Ds0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.db.IExternalDatabase database> param = methodEvent.getInputArguments();
' #txt
Ds0 f0 inParameterMapAction 'out.application=param.database.getConfiguration().getApplication();
out.database=param.database;
out.databaseConfig=param.database.getConfiguration();
' #txt
Ds0 f0 outParameterDecl '<> result;
' #txt
Ds0 f0 embeddedRdInitializations '{/headerPane {/fieldName "headerPane"/startMethod "start(String,String)"/parameterMapping "param.iconUri=\"/Icons/Database/48\";\n"/initScript ""}}' #txt
Ds0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(IExternalDatabase)</name>
        <nameStyle>24,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f0 22 46 20 20 13 0 #rect
Ds0 f0 @|RichDialogInitStartIcon #fIcon
Ds0 f1 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f1 19 219 26 26 14 0 #rect
Ds0 f1 @|RichDialogProcessEndIcon #fIcon
Ds0 f3 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f3 actionTable 'out=in;
' #txt
Ds0 f3 actionCode 'import ch.ivyteam.ivy.db.IExternalDatabaseRuntimeConnection;

List<String> record;
in.connections = new Recordset(["InUse", "Last Used"]);

for (IExternalDatabaseRuntimeConnection connection : in.database.getConnections())
{
  record.add("" + connection.isInUse());
  record.add("" + connection.getLastUsed());
  in.connections.add(record);
}

out.userFriendlyName = in.databaseConfig.getUserFriendlyName();
out.maxConnections = in.databaseConfig.maxConnections;
out.connectionUrl = in.databaseConfig.getDatabaseConnectionConfiguration().getConnectionUrl();
out.driver = in.databaseConfig.getDatabaseConnectionConfiguration().getDriverName();' #txt
Ds0 f3 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get data</name>
        <nameStyle>8,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f3 14 108 36 24 18 -24 #rect
Ds0 f3 @|RichDialogProcessStepIcon #fIcon
Ds0 f4 expr out #txt
Ds0 f4 32 66 32 108 #arcP
Ds0 f7 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f7 actionTable 'out=in;
' #txt
Ds0 f7 actionCode 'import ch.ivyteam.ivy.db.IStatementExecution;

out.lastExecutedStatements = new List<IStatementExecution>();
out.lastExecutedStatements.addAll(in.database.getExecutionHistory());
' #txt
Ds0 f7 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Get last executed statements</name>
        <nameStyle>28,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f7 14 164 36 24 24 -8 #rect
Ds0 f7 @|RichDialogProcessStepIcon #fIcon
Ds0 f8 expr out #txt
Ds0 f8 32 132 32 164 #arcP
Ds0 f2 expr out #txt
Ds0 f2 32 188 32 219 #arcP
Ds0 f9 guid 1187E948AED59E84 #txt
Ds0 f9 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f9 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f9 actionTable 'out=in;
' #txt
Ds0 f9 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openConfiguration</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f9 286 46 20 20 13 0 #rect
Ds0 f9 @|RichDialogProcessStartIcon #fIcon
Ds0 f12 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f12 283 427 26 26 14 0 #rect
Ds0 f12 @|RichDialogProcessEndIcon #fIcon
Ds0 f14 guid 1187FB2F838EB318 #txt
Ds0 f14 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f14 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f14 actionTable 'out=in;
' #txt
Ds0 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>save</name>
        <nameStyle>4,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f14 678 238 20 20 13 0 #rect
Ds0 f14 @|RichDialogProcessStartIcon #fIcon
Ds0 f15 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f15 actionTable 'out=in;
' #txt
Ds0 f15 actionCode 'in.isSuccess = true;
in.errorMessage = "";

try {
	if (in.database.getConfiguration().getMaxConnections() != in.maxConnections)
	{
		in.database.getConfiguration().setMaxConnections(in.maxConnections);	
		in.errorMessage += "Max. Connections Updated. \n";
	}
	if (in.database.getConfiguration().getUserFriendlyName() != in.userFriendlyName)
	{	
		in.errorMessage += "Name updated.";
		in.database.getConfiguration().setUserFriendlyName(in.userFriendlyName);
	}
	if(in.errorMessage.isEmpty())
	{
		in.errorMessage = "There is no change to update.";
	}
} 
catch (Exception ex)
{
	in.errorMessage = "";
	in.isSuccess = false;
	in.errorMessage = ex.getMessage();
}
' #txt
Ds0 f15 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Save data</name>
        <nameStyle>9,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f15 670 396 36 24 12 -31 #rect
Ds0 f15 @|RichDialogProcessStepIcon #fIcon
Ds0 f17 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f17 676 571 24 26 14 0 #rect
Ds0 f17 @|RichDialogProcessEndIcon #fIcon
Ds0 f19 guid 11884C60E82A072C #txt
Ds0 f19 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f19 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f19 actionTable 'out=in;
' #txt
Ds0 f19 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>openStatement</name>
        <nameStyle>13,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f19 598 54 20 20 13 0 #rect
Ds0 f19 @|RichDialogProcessStartIcon #fIcon
Ds0 f20 targetWindow NEW #txt
Ds0 f20 targetDisplay TOP #txt
Ds0 f20 richDialogId ch.ivyteam.ivy.admin.tool.StatementExecutionDetails #txt
Ds0 f20 startMethod start(ch.ivyteam.ivy.db.IStatementExecution) #txt
Ds0 f20 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f20 requestActionDecl '<ch.ivyteam.ivy.db.IStatementExecution statementExecution> param;' #txt
Ds0 f20 requestMappingAction 'param.statementExecution=panel.statementsTable.#selectedListEntry as ch.ivyteam.ivy.db.IStatementExecution;
' #txt
Ds0 f20 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f20 responseMappingAction 'out=in;
' #txt
Ds0 f20 windowConfiguration '#Thu Mar 06 16:49:42 CET 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Statement Execution
' #txt
Ds0 f20 isAsynch false #txt
Ds0 f20 isInnerRd true #txt
Ds0 f20 isDialog true #txt
Ds0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>open details dialog</name>
        <nameStyle>19,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f20 590 100 36 24 28 -8 #rect
Ds0 f20 @|RichDialogIcon #fIcon
Ds0 f21 expr out #txt
Ds0 f21 608 74 608 100 #arcP
Ds0 f22 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f22 595 147 26 26 14 0 #rect
Ds0 f22 @|RichDialogProcessEndIcon #fIcon
Ds0 f23 expr out #txt
Ds0 f23 608 124 608 147 #arcP
Ds0 f24 guid 1189E0E332423EA6 #txt
Ds0 f24 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f24 method close() #txt
Ds0 f24 disableUIEvents false #txt
Ds0 f24 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close()</name>
    </language>
</elementInfo>
' #txt
Ds0 f24 1294 190 20 20 13 0 #rect
Ds0 f24 @|RichDialogMethodStartIcon #fIcon
Ds0 f25 guid 1189E0E38C1692D4 #txt
Ds0 f25 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f25 method refresh() #txt
Ds0 f25 disableUIEvents false #txt
Ds0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh()</name>
    </language>
</elementInfo>
' #txt
Ds0 f25 182 46 20 20 13 0 #rect
Ds0 f25 @|RichDialogMethodStartIcon #fIcon
Ds0 f26 expr out #txt
Ds0 f26 192 66 32 108 #arcP
Ds0 f26 1 192 88 #addKink
Ds0 f26 2 32 88 #addKink
Ds0 f26 1 0.49375 0 0 #arcLabel
Ds0 f27 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f27 guid 1189E0E749F5CE74 #txt
Ds0 f27 851 107 26 26 14 0 #rect
Ds0 f27 @|RichDialogEndIcon #fIcon
Ds0 f5 guid 119753AE92D25D88 #txt
Ds0 f5 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f5 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f5 actionTable 'out=in;
' #txt
Ds0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refresh</name>
        <nameStyle>7,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f5 182 110 20 20 13 0 #rect
Ds0 f5 @|RichDialogProcessStartIcon #fIcon
Ds0 f6 expr out #txt
Ds0 f6 182 120 50 120 #arcP
Ds0 f29 guid 1197693EE7151DAB #txt
Ds0 f29 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f29 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f29 actionTable 'out=in;
' #txt
Ds0 f29 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>close</name>
        <nameStyle>5,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f29 854 54 20 20 13 0 #rect
Ds0 f29 @|RichDialogProcessStartIcon #fIcon
Ds0 f30 expr out #txt
Ds0 f30 864 74 864 107 #arcP
Ds0 f31 guid 11C8E3A762A767C9 #txt
Ds0 f31 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f31 broadcast externalDatabaseDeleted #txt
Ds0 f31 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f31 actionTable 'out=in;
out.deletedDatabaseId=param.externalDatabaseId;
' #txt
Ds0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>externalDatabaseDeleted</name>
        <nameStyle>23,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f31 1094 150 20 20 13 0 #rect
Ds0 f31 @|RichDialogBroadcastStartIcon #fIcon
Ds0 f32 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f32 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ds0 f32 1090 194 28 28 14 0 #rect
Ds0 f32 @|AlternativeIcon #fIcon
Ds0 f33 expr out #txt
Ds0 f33 1104 170 1104 194 #arcP
Ds0 f35 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f35 1163 99 26 26 14 0 #rect
Ds0 f35 @|RichDialogProcessEndIcon #fIcon
Ds0 f37 guid 11C8E3CFBAA8EE48 #txt
Ds0 f37 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f37 broadcast applicationDeleted #txt
Ds0 f37 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f37 actionTable 'out=in;
out.deletedApplicationId=param.applicationId;
' #txt
Ds0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>applicationDeleted</name>
        <nameStyle>18,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f37 1094 46 20 20 13 0 #rect
Ds0 f37 @|RichDialogBroadcastStartIcon #fIcon
Ds0 f38 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f38 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ds0 f38 1090 98 28 28 14 0 #rect
Ds0 f38 @|AlternativeIcon #fIcon
Ds0 f39 expr out #txt
Ds0 f39 1104 66 1104 98 #arcP
Ds0 f40 expr in #txt
Ds0 f40 1118 112 1163 112 #arcP
Ds0 f42 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f42 actionTable 'out=in;
out.database=null;
' #txt
Ds0 f42 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f42 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>set database to null</name>
        <nameStyle>20
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f42 990 268 36 24 20 -2 #rect
Ds0 f42 @|RichDialogProcessStepIcon #fIcon
Ds0 f43 expr in #txt
Ds0 f43 outCond 'in.deletedApplicationId == in.environment.getApplication().getId()' #txt
Ds0 f43 1090 112 1008 268 #arcP
Ds0 f43 1 1008 112 #addKink
Ds0 f43 1 0.23717948717948728 0 0 #arcLabel
Ds0 f44 expr in #txt
Ds0 f44 outCond 'in.deletedDatabaseId == in.databaseConfig.getId()' #txt
Ds0 f44 1090 208 1008 268 #arcP
Ds0 f44 1 1008 208 #addKink
Ds0 f44 0 0.8658536585365854 0 0 #arcLabel
Ds0 f34 guid 11F425642D149F1D #txt
Ds0 f34 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f34 method matchIdentifier(String,java.lang.Object) #txt
Ds0 f34 disableUIEvents false #txt
Ds0 f34 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<java.lang.String type,java.lang.Object identifier> param = methodEvent.getInputArguments();
' #txt
Ds0 f34 inParameterMapAction 'out.tempIdentifier=param.identifier as Number;
out.tempType=param.type;
' #txt
Ds0 f34 outParameterDecl '<java.lang.String name> result;
' #txt
Ds0 f34 outActionCode 'if (in.tempType == "database")
{
	if (in.tempIdentifier == in.databaseConfig.getId())
	{
		result.name = panel.getName();
	}
}' #txt
Ds0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>matchIdentifier(String,Object)</name>
        <nameStyle>30,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f34 1294 46 20 20 13 0 #rect
Ds0 f34 @|RichDialogMethodStartIcon #fIcon
Ds0 f45 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f45 1291 139 26 26 14 0 #rect
Ds0 f45 @|RichDialogProcessEndIcon #fIcon
Ds0 f46 expr out #txt
Ds0 f46 1304 66 1304 139 #arcP
Ds0 f50 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f50 guid 1215D04723FA9AD8 #txt
Ds0 f50 1291 243 26 26 14 0 #rect
Ds0 f50 @|RichDialogEndIcon #fIcon
Ds0 f51 expr out #txt
Ds0 f51 1304 210 1304 243 #arcP
Ds0 f28 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f28 1163 195 26 26 14 0 #rect
Ds0 f28 @|RichDialogProcessEndIcon #fIcon
Ds0 f52 expr in #txt
Ds0 f52 1118 208 1163 208 #arcP
Ds0 f36 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f36 guid 1215D06995A8E888 #txt
Ds0 f36 995 315 26 26 14 0 #rect
Ds0 f36 @|RichDialogEndIcon #fIcon
Ds0 f53 expr out #txt
Ds0 f53 1008 292 1008 315 #arcP
Ds0 f41 guid 12176D825FB21A89 #txt
Ds0 f41 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f41 method setDatabase(ch.ivyteam.ivy.application.IExternalDatabaseConfiguration) #txt
Ds0 f41 disableUIEvents false #txt
Ds0 f41 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.application.IExternalDatabaseConfiguration database> param = methodEvent.getInputArguments();
' #txt
Ds0 f41 inParameterMapAction 'out.databaseConfig=param.database;
' #txt
Ds0 f41 inActionCode 'out.errorMessage = "";
try
{
	out.application = param.database.getApplication();
} 
catch (Exception ex)
{
	out.errorMessage = ex.getMessage();
}' #txt
Ds0 f41 outParameterDecl '<> result;
' #txt
Ds0 f41 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>setDatabase
(IExternalDatabase)</name>
        <nameStyle>31,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f41 1294 326 20 20 13 0 #rect
Ds0 f41 @|RichDialogMethodStartIcon #fIcon
Ds0 f56 targetWindow NEW:card: #txt
Ds0 f56 targetDisplay TOP #txt
Ds0 f56 richDialogId ch.ivyteam.ivy.admin.tool.database.ExternalDatabaseConfiguration #txt
Ds0 f56 startMethod start(ch.ivyteam.ivy.application.IExternalDatabaseConfiguration) #txt
Ds0 f56 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f56 requestActionDecl '<ch.ivyteam.ivy.application.IExternalDatabaseConfiguration database> param;' #txt
Ds0 f56 requestActionCode 'import ch.ivyteam.ivy.application.IExternalDatabaseConfiguration;

//If default environment, pass a clone, in order to avoid override default config
if(in.environment.isDefault() || !in.isDefault)
{
	IExternalDatabaseConfiguration c = in.databaseConfig;
	param.database = c;
}
else
{
	param.database = in.databaseConfig;
}' #txt
Ds0 f56 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f56 responseMappingAction 'out=in;
out.connectionUrl=result.database.getDatabaseConnectionConfiguration().getConnectionUrl();
out.databaseConfig=result.database;
out.driver=result.database.getDatabaseConnectionConfiguration().getDriverName();
out.maxConnections=in.databaseConfig.maxConnections;
out.userFriendlyName=in.databaseConfig.getUserFriendlyName();
' #txt
Ds0 f56 windowConfiguration '{/title "Database Configuration - <%=in.userFriendlyName%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f56 isAsynch false #txt
Ds0 f56 isInnerRd true #txt
Ds0 f56 isDialog true #txt
Ds0 f56 userContext '* ' #txt
Ds0 f56 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open
configuration</name>
        <nameStyle>18,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f56 278 284 36 24 20 -2 #rect
Ds0 f56 @|RichDialogIcon #fIcon
Ds0 f11 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f11 1291 563 26 26 14 0 #rect
Ds0 f11 @|RichDialogProcessEndIcon #fIcon
Ds0 f60 guid 12187361EE2C58BE #txt
Ds0 f60 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f60 method start() #txt
Ds0 f60 disableUIEvents false #txt
Ds0 f60 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ds0 f60 outParameterDecl '<> result;
' #txt
Ds0 f60 embeddedRdInitializations '{/headerPane {/fieldName "headerPane"/startMethod "start(String,String,Boolean,Boolean)"/parameterMapping "param.showCloseButton=false;\nparam.showRefreshButton=false;\n"/initScript ""}}' #txt
Ds0 f60 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
        <nameStyle>7,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f60 150 222 20 20 13 0 #rect
Ds0 f60 @|RichDialogInitStartIcon #fIcon
Ds0 f61 expr out #txt
Ds0 f61 150 232 45 232 #arcP
Ds0 f61 0 0.49596557288864973 0 0 #arcLabel
Ds0 f10 guid 1219FD73DF049D33 #txt
Ds0 f10 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f10 method showDetails(ch.ivyteam.ivy.application.IExternalDatabaseConfiguration,ch.ivyteam.ivy.application.restricted.IEnvironment) #txt
Ds0 f10 disableUIEvents false #txt
Ds0 f10 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.application.IExternalDatabaseConfiguration databaseConfig,ch.ivyteam.ivy.application.restricted.IEnvironment environment> param = methodEvent.getInputArguments();
' #txt
Ds0 f10 inParameterMapAction 'out.application=param.environment.getApplication();
out.databaseConfig=param.databaseConfig;
out.editMode=true;
out.environment=param.environment;
' #txt
Ds0 f10 outParameterDecl '<> result;
' #txt
Ds0 f10 embeddedRdInitializations '{/headerPane {/fieldName "headerPane"/startMethod "start()"/parameterMapping ""/initScript ""/userContext * }}' #txt
Ds0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showDetails
(IExternalDatabaseConfiguration
,IEnvironment)</name>
        <nameStyle>58,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f10 22 311 20 18 17 -6 #rect
Ds0 f10 @|RichDialogInitStartIcon #fIcon
Ds0 f13 expr out #txt
Ds0 f13 32 311 32 245 #arcP
Ds0 f72 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f72 actionTable 'out=in;
' #txt
Ds0 f72 actionCode 'import ch.ivyteam.ivy.application.IApplication;
import ch.ivyteam.ivy.server.IServer;
import ch.ivyteam.ivy.db.IExternalDatabaseApplicationContext;

ch.ivyteam.ivy.db.IExternalDatabaseApplicationContext extDbManager; 
extDbManager = ch.ivyteam.ivy.admin.tool.NavigationHelper.getExternalDatabaseManager(in.application); 
	
//Hack in order to get database for the right environment
String activeEnvName = in.environment.getApplication().getActiveEnvironment();
in.environment.getApplication().setActiveEnvironment(in.environment.getName());
in.database = extDbManager.getExternalDatabase(in.databaseConfig.getUserFriendlyName());
in.environment.getApplication().setActiveEnvironment(activeEnvName);
	
in.isDefault = Boolean.valueOf(in.databaseConfig.getDefaultConfiguration() == null);
	
if(in.isDefault && !in.environment.isDefault())
{
	panel.connectionsTextField.setEditable(false);
}
else
{
	panel.connectionsTextField.setEditable(true);
}
	
//refresh this panel
panel.refresh();
' #txt
Ds0 f72 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f72 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>load
details
of configuration</name>
        <nameStyle>29,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f72 1286 492 36 24 20 -2 #rect
Ds0 f72 @|RichDialogProcessStepIcon #fIcon
Ds0 f62 expr out #txt
Ds0 f62 1304 516 1304 563 #arcP
Ds0 f63 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>is default
config</name>
        <nameStyle>17,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f63 282 90 28 28 14 0 #rect
Ds0 f63 @|AlternativeIcon #fIcon
Ds0 f73 expr out #txt
Ds0 f73 296 66 296 90 #arcP
Ds0 f74 targetWindow NEW #txt
Ds0 f74 targetDisplay TOP #txt
Ds0 f74 richDialogId ch.ivyteam.ivy.commondialogs.QuestionDialog #txt
Ds0 f74 startMethod askQuestion(String,String,List<String>,String) #txt
Ds0 f74 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f74 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Ds0 f74 requestMappingAction 'param.question="This is the default database configuration. Would you like to override the default configuration for the environment";
param.buttons=["yes","no"];
param.defaultButton="no";
' #txt
Ds0 f74 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f74 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
Ds0 f74 windowConfiguration '{/title "Override Configuration"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f74 isAsynch false #txt
Ds0 f74 isInnerRd true #txt
Ds0 f74 isDialog true #txt
Ds0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Aks to
override</name>
        <nameStyle>15,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f74 382 92 36 24 20 -2 #rect
Ds0 f74 @|RichDialogIcon #fIcon
Ds0 f57 expr in #txt
Ds0 f57 outCond '!in.environment.isDefault()  &&  in.isDefault' #txt
Ds0 f57 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f57 310 104 382 104 #arcP
Ds0 f57 0 0.4722222222222222 0 -11 #arcLabel
Ds0 f75 expr in #txt
Ds0 f75 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f75 296 118 296 284 #arcP
Ds0 f75 0 0.19879518072289157 -13 0 #arcLabel
Ds0 f76 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f76 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>pressed?</name>
        <nameStyle>8,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f76 386 154 28 28 14 0 #rect
Ds0 f76 @|AlternativeIcon #fIcon
Ds0 f77 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f77 actionTable 'out=in;
' #txt
Ds0 f77 actionCode 'import ch.ivyteam.db.jdbc.DatabaseConnectionConfiguration;
import java.util.EnumSet;

EnumSet accessFlags = EnumSet.noneOf(ch.ivyteam.ivy.application.ExternalDatabaseConfigurationAccessFlag.DOWNLOAD_META.getClass());
DatabaseConnectionConfiguration dbConfig = new DatabaseConnectionConfiguration();
dbConfig = in.databaseConfig.getDatabaseConnectionConfiguration();

in.databaseConfig =  in.environment.createExternalDatabaseConfiguration(
							in.userFriendlyName,
							dbConfig,
							accessFlags,
							in.maxConnections);

panel.setDatabase(in.databaseConfig);' #txt
Ds0 f77 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f77 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Create
DB configuration
for environment</name>
        <nameStyle>39,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f77 382 204 36 24 20 -2 #rect
Ds0 f77 @|RichDialogProcessStepIcon #fIcon
Ds0 f78 expr in #txt
Ds0 f78 outCond 'in.pressedButton == "yes"' #txt
Ds0 f78 400 182 400 204 #arcP
Ds0 f79 expr out #txt
Ds0 f79 400 116 400 154 #arcP
Ds0 f80 expr in #txt
Ds0 f80 414 168 309 440 #arcP
Ds0 f80 1 512 168 #addKink
Ds0 f80 2 512 440 #addKink
Ds0 f80 1 0.7829051394034 0 0 #arcLabel
Ds0 f81 expr out #txt
Ds0 f81 400 228 296 284 #arcP
Ds0 f81 1 400 256 #addKink
Ds0 f81 2 296 256 #addKink
Ds0 f81 1 0.5 0 0 #arcLabel
Ds0 f54 targetDisplay TOP #txt
Ds0 f54 richDialogId ch.ivyteam.ivy.commondialogs.QuestionDialog #txt
Ds0 f54 startMethod askQuestion(String,String,List<String>,String) #txt
Ds0 f54 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f54 requestActionDecl '<String icon, String question, List<String> buttons, String defaultButton> param;' #txt
Ds0 f54 requestMappingAction 'param.question="Would you like to reset to the default configuration";
param.buttons=["yes","no"];
param.defaultButton="no";
' #txt
Ds0 f54 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f54 responseMappingAction 'out=in;
out.pressedButton=result.pressedButton;
' #txt
Ds0 f54 windowConfiguration '{/title "Reset to Default Configuration"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f54 isAsynch false #txt
Ds0 f54 isInnerRd true #txt
Ds0 f54 isDialog true #txt
Ds0 f54 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Aks to
restore</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f54 278 540 36 24 20 -2 #rect
Ds0 f54 @|RichDialogIcon #fIcon
Ds0 f55 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f55 actionTable 'out=in;
' #txt
Ds0 f55 actionCode 'import ch.ivyteam.ivy.application.IExternalDatabaseDefaultConfiguration;

if(in.databaseConfig.getDefaultConfiguration() != null){
	IExternalDatabaseDefaultConfiguration defaultConfig = in.databaseConfig.getDefaultConfiguration();
  defaultConfig.deleteEnvironmentConfiguration(in.databaseConfig);
  in.databaseConfig = defaultConfig;
	panel.setDatabase(in.databaseConfig);
}' #txt
Ds0 f55 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Reset to default
configuration</name>
        <nameStyle>30,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f55 398 620 36 24 20 -2 #rect
Ds0 f55 @|RichDialogProcessStepIcon #fIcon
Ds0 f64 targetWindow NEW:card: #txt
Ds0 f64 targetDisplay TOP #txt
Ds0 f64 richDialogId ch.ivyteam.ivy.commondialogs.MessageDialog #txt
Ds0 f64 startMethod showMessage(String) #txt
Ds0 f64 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f64 requestActionDecl '<String message> param;' #txt
Ds0 f64 requestMappingAction 'param.message="The environment configuration for the database was successfully reset to the Default configuration";
' #txt
Ds0 f64 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f64 responseMappingAction 'out=in;
' #txt
Ds0 f64 windowConfiguration '{/title "Information"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f64 isAsynch false #txt
Ds0 f64 isInnerRd true #txt
Ds0 f64 isDialog true #txt
Ds0 f64 userContext '* ' #txt
Ds0 f64 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Information</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f64 398 684 36 24 20 -2 #rect
Ds0 f64 @|RichDialogIcon #fIcon
Ds0 f67 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language/>
</elementInfo>
' #txt
Ds0 f67 282 618 28 28 14 0 #rect
Ds0 f67 @|AlternativeIcon #fIcon
Ds0 f68 expr out #txt
Ds0 f68 296 564 296 618 #arcP
Ds0 f69 expr in #txt
Ds0 f69 outCond 'in.pressedButton == "yes"' #txt
Ds0 f69 310 632 398 632 #arcP
Ds0 f71 expr out #txt
Ds0 f71 416 644 416 684 #arcP
Ds0 f65 guid 12278970A6084E89 #txt
Ds0 f65 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f65 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f65 actionTable 'out=in;
' #txt
Ds0 f65 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>resetToDefault</name>
        <nameStyle>14,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f65 286 494 20 20 13 0 #rect
Ds0 f65 @|RichDialogProcessStartIcon #fIcon
Ds0 f66 expr out #txt
Ds0 f66 296 514 296 540 #arcP
Ds0 f70 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f70 286 750 20 20 13 0 #rect
Ds0 f70 @|RichDialogProcessEndIcon #fIcon
Ds0 f82 expr in #txt
Ds0 f82 296 646 296 750 #arcP
Ds0 f84 actionCode panel.fireRefreshDbList(); #txt
Ds0 f84 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f84 fireEvent refreshDbList() #txt
Ds0 f84 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshDbList</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f84 398 748 36 24 18 -27 #rect
Ds0 f84 @|RichDialogFireEventIcon #fIcon
Ds0 f85 expr out #txt
Ds0 f85 416 708 416 748 #arcP
Ds0 f83 expr out #txt
Ds0 f83 398 760 306 760 #arcP
Ds0 f83 0 0.5053830098097677 0 0 #arcLabel
Ds0 f86 actionCode panel.fireRefreshDbList(); #txt
Ds0 f86 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f86 fireEvent refreshDbList() #txt
Ds0 f86 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>refreshDbList</name>
        <nameStyle>13,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f86 278 356 36 24 20 -2 #rect
Ds0 f86 @|RichDialogFireEventIcon #fIcon
Ds0 f87 expr out #txt
Ds0 f87 296 308 296 356 #arcP
Ds0 f58 expr out #txt
Ds0 f58 296 380 296 427 #arcP
Ds0 f47 actionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f47 actionTable 'out=in;
' #txt
Ds0 f47 actionCode 'import ch.ivyteam.ivy.admin.tool.util.DatabaseValidationProperties;

import java.text.MessageFormat;

in.isSuccess = true;
in.errorMessage = "";

if(in.maxConnections < 1 || in.maxConnections > 9999)
{
	in.isSuccess = false;
	int maxNoOfConnection = DatabaseValidationProperties.getMaxNumberOfConnections();
	if(maxNoOfConnection > 0)
	{
		in.errorMessage += "Max. Connection must be greater than 0 and smaller than or equal to " + maxNoOfConnection + ".\n";
	}
	else
	{
		in.errorMessage += "Max. Connection is too long. Please re-define it.\n";
	}
}


if(in.userFriendlyName.isEmpty() || in.userFriendlyName.length() > 40)
{
	in.isSuccess = false;
	int userFriendlyNameMaxLength = DatabaseValidationProperties.getUserFriendlyNameMaxLength();
	if(userFriendlyNameMaxLength > 0)
	{
		in.errorMessage += MessageFormat.format(ivy.cms.co("/Dialogs/general/shortThan"), "Name", userFriendlyNameMaxLength) + ".\n";
	}
	else
	{
		in.errorMessage += "Name is too long. Please re-define it.\n";
	}
}' #txt
Ds0 f47 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f47 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>validating</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f47 670 284 36 24 20 -2 #rect
Ds0 f47 @|RichDialogProcessStepIcon #fIcon
Ds0 f49 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f49 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>isValid</name>
        <nameStyle>7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f49 674 338 28 28 9 -23 #rect
Ds0 f49 @|AlternativeIcon #fIcon
Ds0 f88 expr out #txt
Ds0 f88 688 308 688 338 #arcP
Ds0 f16 expr in #txt
Ds0 f16 outCond 'in.isSuccess == true' #txt
Ds0 f16 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f16 688 366 688 396 #arcP
Ds0 f16 0 0.36666666666666664 -12 0 #arcLabel
Ds0 f89 targetWindow NEW:card: #txt
Ds0 f89 targetDisplay TOP #txt
Ds0 f89 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ds0 f89 startMethod showError(ch.ivyteam.ivy.commons.data.technical.IvyResultStatus,Boolean,Boolean) #txt
Ds0 f89 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f89 requestActionDecl '<ch.ivyteam.ivy.commons.data.technical.IvyResultStatus ivyResultStatus, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ds0 f89 requestActionCode 'param.ivyResultStatus.message = in.errorMessage;' #txt
Ds0 f89 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f89 responseMappingAction 'out=in;
' #txt
Ds0 f89 windowConfiguration '{/title "<%=ivy.cms.co(\"/Dialogs/general/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f89 isAsynch false #txt
Ds0 f89 isInnerRd true #txt
Ds0 f89 userContext '* ' #txt
Ds0 f89 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show 
Error Message</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f89 766 340 36 24 26 -29 #rect
Ds0 f89 @|RichDialogIcon #fIcon
Ds0 f90 expr in #txt
Ds0 f90 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f90 702 352 766 352 #arcP
Ds0 f90 0 0.375 0 10 #arcLabel
Ds0 f91 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f91 774 398 20 20 13 0 #rect
Ds0 f91 @|RichDialogProcessEndIcon #fIcon
Ds0 f92 expr out #txt
Ds0 f92 784 364 784 398 #arcP
Ds0 f93 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f93 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>updated success?</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f93 674 450 28 28 14 -23 #rect
Ds0 f93 @|AlternativeIcon #fIcon
Ds0 f94 expr out #txt
Ds0 f94 688 420 688 450 #arcP
Ds0 f95 targetWindow NEW:card: #txt
Ds0 f95 targetDisplay TOP #txt
Ds0 f95 richDialogId ch.ivyteam.ivy.admin.tool.deploymentwizardserver.ErrorDialog #txt
Ds0 f95 startMethod information(String) #txt
Ds0 f95 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f95 requestActionDecl '<String message> param;' #txt
Ds0 f95 requestActionCode 'param.message = in.errorMessage;' #txt
Ds0 f95 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f95 responseMappingAction 'out=in;
' #txt
Ds0 f95 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/server/deploymentWizard/dialogTitle/infoDialog\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f95 isAsynch false #txt
Ds0 f95 isInnerRd true #txt
Ds0 f95 userContext '* ' #txt
Ds0 f95 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display 
Info Message</name>
        <nameStyle>21,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f95 670 516 37 24 23 -15 #rect
Ds0 f95 @|RichDialogIcon #fIcon
Ds0 f97 targetWindow NEW:card: #txt
Ds0 f97 targetDisplay TOP #txt
Ds0 f97 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ds0 f97 startMethod showError(ch.ivyteam.ivy.commons.data.technical.IvyResultStatus,Boolean,Boolean) #txt
Ds0 f97 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f97 requestActionDecl '<ch.ivyteam.ivy.commons.data.technical.IvyResultStatus ivyResultStatus, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ds0 f97 requestActionCode 'param.ivyResultStatus.message = in.errorMessage;' #txt
Ds0 f97 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f97 responseMappingAction 'out=in;
' #txt
Ds0 f97 windowConfiguration '{/title "<%=ivy.cms.co(\"/Dialogs/general/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f97 isAsynch false #txt
Ds0 f97 isInnerRd true #txt
Ds0 f97 userContext '* ' #txt
Ds0 f97 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>display 
Error Message</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f97 574 452 36 24 -38 -49 #rect
Ds0 f97 @|RichDialogIcon #fIcon
Ds0 f98 expr in #txt
Ds0 f98 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>No</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f98 674 464 610 464 #arcP
Ds0 f98 0 0.5 0 -9 #arcLabel
Ds0 f99 expr out #txt
Ds0 f99 592 476 676 584 #arcP
Ds0 f99 1 592 584 #addKink
Ds0 f99 1 0.014928749927334067 0 0 #arcLabel
Ds0 f100 expr out #txt
Ds0 f100 687 540 687 571 #arcP
Ds0 f100 0 0.5101917699067705 0 0 #arcLabel
Ds0 f96 expr in #txt
Ds0 f96 outCond in.isSuccess #txt
Ds0 f96 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f96 688 478 687 516 #arcP
Ds0 f96 0 0.34850166481687017 16 1 #arcLabel
Ds0 f48 expr out #txt
Ds0 f48 688 258 688 284 #arcP
Ds0 f18 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>has error?</name>
        <nameStyle>10
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f18 1290 402 28 28 14 0 #rect
Ds0 f18 @|AlternativeIcon #fIcon
Ds0 f18 -13016147|-1|-16777216 #nodeStyle
Ds0 f101 expr out #txt
Ds0 f101 1304 346 1304 402 #arcP
Ds0 f59 expr in #txt
Ds0 f59 outCond in.errorMessage.isEmpty() #txt
Ds0 f59 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f59 1304 430 1304 492 #arcP
Ds0 f102 targetWindow NEW:card: #txt
Ds0 f102 targetDisplay TOP #txt
Ds0 f102 richDialogId ch.ivyteam.ivy.admin.tool.deploymentwizardserver.ErrorDialog #txt
Ds0 f102 startMethod start(String) #txt
Ds0 f102 type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
Ds0 f102 requestActionDecl '<String errorMessage> param;' #txt
Ds0 f102 requestMappingAction 'param.errorMessage=in.errorMessage;
' #txt
Ds0 f102 responseActionDecl 'ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData out;
' #txt
Ds0 f102 responseMappingAction 'out=in;
' #txt
Ds0 f102 windowConfiguration '{/title "<%=ivy.cms.co(\"/Dialogs/general/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ds0 f102 isAsynch false #txt
Ds0 f102 isInnerRd true #txt
Ds0 f102 userContext '* ' #txt
Ds0 f102 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show error</name>
        <nameStyle>10
</nameStyle>
    </language>
</elementInfo>
' #txt
Ds0 f102 1422 404 36 24 20 -2 #rect
Ds0 f102 @|RichDialogIcon #fIcon
Ds0 f102 -13016147|-1|-16777216 #nodeStyle
Ds0 f103 expr in #txt
Ds0 f103 1318 416 1422 416 #arcP
Ds0 f104 expr out #txt
Ds0 f104 1440 428 1317 576 #arcP
Ds0 f104 1 1440 576 #addKink
Ds0 f104 0 0.9585358241629724 0 0 #arcLabel
>Proto Ds0 .type ch.ivyteam.ivy.admin.tool.database.DatabaseDetails.DatabaseDetailsData #txt
>Proto Ds0 .processKind RICH_DIALOG #txt
>Proto Ds0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Start</swimlaneLabel>
        <swimlaneLabel>Events</swimlaneLabel>
        <swimlaneLabel>Broadcasts</swimlaneLabel>
        <swimlaneLabel>Methods</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneSize>262</swimlaneSize>
    <swimlaneSize>696</swimlaneSize>
    <swimlaneSize>315</swimlaneSize>
    <swimlaneSize>312</swimlaneSize>
    <swimlaneColor>-6684775</swimlaneColor>
    <swimlaneColor>-1</swimlaneColor>
    <swimlaneColor>-3368449</swimlaneColor>
    <swimlaneColor>-26215</swimlaneColor>
</elementInfo>
' #txt
>Proto Ds0 .ui2RdDataAction 'out.maxConnections=panel.connectionsTextField.valueAsNumber;
out.userFriendlyName=panel.nameTextField.text;
' #txt
>Proto Ds0 .rdData2UIAction 'panel.btnReset.visible=!in.isDefault;
panel.connectionsTable.recordsetData=in.connections;
panel.connectionsTextField.valueAsNumber=in.maxConnections;
panel.driverTextField.text=in.driver;
panel.headerPane.title=in.#database!=null?"Database ''"+in.database.getConfiguration().getUserFriendlyName() + "''":"";
panel.nameTextField.enabled=!in.editMode;
panel.nameTextField.text=in.userFriendlyName;
panel.saveButton.visible=!in.isDefault || in.environment.isDefault();
panel.statementsTable.listData=in.lastExecutedStatements;
panel.urlTextField.text=in.connectionUrl;
' #txt
>Proto Ds0 -8 -8 16 16 16 26 #rect
>Proto Ds0 '' #fIcon
Ds0 f0 mainOut f4 tail #connect
Ds0 f4 head f3 mainIn #connect
Ds0 f3 mainOut f8 tail #connect
Ds0 f8 head f7 mainIn #connect
Ds0 f7 mainOut f2 tail #connect
Ds0 f2 head f1 mainIn #connect
Ds0 f19 mainOut f21 tail #connect
Ds0 f21 head f20 mainIn #connect
Ds0 f20 mainOut f23 tail #connect
Ds0 f23 head f22 mainIn #connect
Ds0 f25 mainOut f26 tail #connect
Ds0 f26 head f3 mainIn #connect
Ds0 f5 mainOut f6 tail #connect
Ds0 f6 head f3 mainIn #connect
Ds0 f29 mainOut f30 tail #connect
Ds0 f30 head f27 mainIn #connect
Ds0 f31 mainOut f33 tail #connect
Ds0 f33 head f32 in #connect
Ds0 f37 mainOut f39 tail #connect
Ds0 f39 head f38 in #connect
Ds0 f40 head f35 mainIn #connect
Ds0 f38 out f43 tail #connect
Ds0 f43 head f42 mainIn #connect
Ds0 f38 out f40 tail #connect
Ds0 f32 out f44 tail #connect
Ds0 f44 head f42 mainIn #connect
Ds0 f34 mainOut f46 tail #connect
Ds0 f46 head f45 mainIn #connect
Ds0 f24 mainOut f51 tail #connect
Ds0 f51 head f50 mainIn #connect
Ds0 f32 out f52 tail #connect
Ds0 f52 head f28 mainIn #connect
Ds0 f42 mainOut f53 tail #connect
Ds0 f53 head f36 mainIn #connect
Ds0 f60 mainOut f61 tail #connect
Ds0 f61 head f1 mainIn #connect
Ds0 f10 mainOut f13 tail #connect
Ds0 f13 head f1 mainIn #connect
Ds0 f72 mainOut f62 tail #connect
Ds0 f62 head f11 mainIn #connect
Ds0 f9 mainOut f73 tail #connect
Ds0 f73 head f63 in #connect
Ds0 f63 out f57 tail #connect
Ds0 f57 head f74 mainIn #connect
Ds0 f63 out f75 tail #connect
Ds0 f75 head f56 mainIn #connect
Ds0 f76 out f78 tail #connect
Ds0 f78 head f77 mainIn #connect
Ds0 f74 mainOut f79 tail #connect
Ds0 f79 head f76 in #connect
Ds0 f76 out f80 tail #connect
Ds0 f80 head f12 mainIn #connect
Ds0 f77 mainOut f81 tail #connect
Ds0 f81 head f56 mainIn #connect
Ds0 f54 mainOut f68 tail #connect
Ds0 f68 head f67 in #connect
Ds0 f67 out f69 tail #connect
Ds0 f69 head f55 mainIn #connect
Ds0 f55 mainOut f71 tail #connect
Ds0 f71 head f64 mainIn #connect
Ds0 f65 mainOut f66 tail #connect
Ds0 f66 head f54 mainIn #connect
Ds0 f67 out f82 tail #connect
Ds0 f82 head f70 mainIn #connect
Ds0 f64 mainOut f85 tail #connect
Ds0 f85 head f84 mainIn #connect
Ds0 f84 mainOut f83 tail #connect
Ds0 f83 head f70 mainIn #connect
Ds0 f56 mainOut f87 tail #connect
Ds0 f87 head f86 mainIn #connect
Ds0 f86 mainOut f58 tail #connect
Ds0 f58 head f12 mainIn #connect
Ds0 f47 mainOut f88 tail #connect
Ds0 f88 head f49 in #connect
Ds0 f49 out f16 tail #connect
Ds0 f16 head f15 mainIn #connect
Ds0 f49 out f90 tail #connect
Ds0 f90 head f89 mainIn #connect
Ds0 f89 mainOut f92 tail #connect
Ds0 f92 head f91 mainIn #connect
Ds0 f15 mainOut f94 tail #connect
Ds0 f94 head f93 in #connect
Ds0 f98 head f97 mainIn #connect
Ds0 f97 mainOut f99 tail #connect
Ds0 f99 head f17 mainIn #connect
Ds0 f95 mainOut f100 tail #connect
Ds0 f100 head f17 mainIn #connect
Ds0 f93 out f96 tail #connect
Ds0 f96 head f95 mainIn #connect
Ds0 f93 out f98 tail #connect
Ds0 f14 mainOut f48 tail #connect
Ds0 f48 head f47 mainIn #connect
Ds0 f41 mainOut f101 tail #connect
Ds0 f101 head f18 in #connect
Ds0 f18 out f59 tail #connect
Ds0 f59 head f72 mainIn #connect
Ds0 f18 out f103 tail #connect
Ds0 f103 head f102 mainIn #connect
Ds0 f102 mainOut f104 tail #connect
Ds0 f104 head f11 mainIn #connect
