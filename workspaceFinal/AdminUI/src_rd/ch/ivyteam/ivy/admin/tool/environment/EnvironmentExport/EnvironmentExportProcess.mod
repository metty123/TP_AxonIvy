[Ivy]
[>Created: Wed Aug 12 13:43:37 ICT 2015]
13AAFDFFD2C7DF1F 3.17 #module
>Proto >Proto Collection #zClass
Ls0 EnvironmentExportProcess Big #zClass
Ls0 RD #cInfo
Ls0 #process
Ls0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Ls0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Ls0 @TextInP .resExport .resExport #zField
Ls0 @TextInP .type .type #zField
Ls0 @TextInP .processKind .processKind #zField
Ls0 @AnnotationInP-0n ai ai #zField
Ls0 @TextInP .xml .xml #zField
Ls0 @TextInP .responsibility .responsibility #zField
Ls0 @RichDialogProcessEnd f1 '' #zField
Ls0 @RichDialogProcessStart f5 '' #zField
Ls0 @RichDialogProcessStart f6 '' #zField
Ls0 @RichDialogUiSync f78 '' #zField
Ls0 @RichDialog f117 '' #zField
Ls0 @Alternative f80 '' #zField
Ls0 @RichDialogProcessStep f39 '' #zField
Ls0 @RichDialog f67 '' #zField
Ls0 @RichDialogProcessStep f58 '' #zField
Ls0 @RichDialog f55 '' #zField
Ls0 @Alternative f61 '' #zField
Ls0 @PushWFArc f62 '' #zField
Ls0 @PushWFArc f68 '' #zField
Ls0 @PushWFArc f81 '' #zField
Ls0 @PushWFArc f82 '' #zField
Ls0 @PushWFArc f84 '' #zField
Ls0 @PushWFArc f86 '' #zField
Ls0 @PushWFArc f57 '' #zField
Ls0 @RichDialogEnd f3 '' #zField
Ls0 @PushWFArc f4 '' #zField
Ls0 @RichDialogInitStart f8 '' #zField
Ls0 @PushWFArc f9 '' #zField
Ls0 @Alternative f11 '' #zField
Ls0 @PushWFArc f12 '' #zField
Ls0 @PushWFArc f13 '' #zField
Ls0 @RichDialogEnd f10 '' #zField
Ls0 @PushWFArc f15 '' #zField
Ls0 @PushWFArc f16 '' #zField
Ls0 @RichDialogProcessStep f18 '' #zField
Ls0 @RichDialogUiSync f19 '' #zField
Ls0 @RichDialog f20 '' #zField
Ls0 @Alternative f21 '' #zField
Ls0 @Alternative f22 '' #zField
Ls0 @PushWFArc f23 '' #zField
Ls0 @PushWFArc f24 '' #zField
Ls0 @PushWFArc f25 '' #zField
Ls0 @PushWFArc f26 '' #zField
Ls0 @PushWFArc f27 '' #zField
Ls0 @PushWFArc f14 '' #zField
Ls0 @PushWFArc f29 '' #zField
Ls0 @PushWFArc f30 '' #zField
Ls0 @PushWFArc f17 '' #zField
Ls0 @Alternative f31 '' #zField
Ls0 @PushWFArc f7 '' #zField
Ls0 @RichDialog f33 '' #zField
Ls0 @RichDialogProcessEnd f34 '' #zField
Ls0 @PushWFArc f35 '' #zField
Ls0 @PushWFArc f36 '' #zField
Ls0 @RichDialogProcessStep f37 '' #zField
Ls0 @PushWFArc f38 '' #zField
Ls0 @PushWFArc f32 '' #zField
Ls0 @RichDialogInitStart f40 '' #zField
Ls0 @PushWFArc f41 '' #zField
Ls0 @RichDialogInitStart f0 '' #zField
Ls0 @PushWFArc f2 '' #zField
Ls0 @RichDialogProcessStep f70 '' #zField
Ls0 @PushWFArc f42 '' #zField
Ls0 @PushWFArc f43 '' #zField
>Proto Ls0 Ls0 EnvironmentExportProcess #zField
Ls0 f1 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f1 86 150 20 20 13 0 #rect
Ls0 f1 @|RichDialogProcessEndIcon #fIcon
Ls0 f5 guid 138482FDCB29C59F #txt
Ls0 f5 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f5 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f5 actionTable 'out=in;
' #txt
Ls0 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>export</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f5 382 54 20 20 13 0 #rect
Ls0 f5 @|RichDialogProcessStartIcon #fIcon
Ls0 f6 guid 138482FE78474BE0 #txt
Ls0 f6 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f6 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f6 actionTable 'out=in;
' #txt
Ls0 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Cancel</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f6 550 54 20 20 13 0 #rect
Ls0 f6 @|RichDialogProcessStartIcon #fIcon
Ls0 f78 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f78 guid 1384836107C13190 #txt
Ls0 f78 379 515 26 26 13 0 #rect
Ls0 f78 @|RichDialogUiSyncIcon #fIcon
Ls0 f117 targetWindow NEW:card: #txt
Ls0 f117 targetDisplay TOP #txt
Ls0 f117 richDialogId ch.ivyteam.ivy.admin.tool.report.LogViewer #txt
Ls0 f117 startMethod start(ch.ivyteam.ivy.admin.tool.report.IReport) #txt
Ls0 f117 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f117 requestActionDecl '<ch.ivyteam.ivy.admin.tool.report.IReport report> param;' #txt
Ls0 f117 requestActionCode 'import ch.ivyteam.ivy.admin.tool.report.SaieReport;
in.report = new SaieReport();
param.report = in.report;' #txt
Ls0 f117 responseActionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f117 responseMappingAction 'out=in;
' #txt
Ls0 f117 windowConfiguration '{/title "Export Log"/width 600 /height 400 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ls0 f117 isAsynch true #txt
Ls0 f117 isInnerRd true #txt
Ls0 f117 userContext '{/context-mode \"STANDALONE\"}' #txt
Ls0 f117 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start log viewer</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f117 374 212 37 24 20 -2 #rect
Ls0 f117 @|RichDialogIcon #fIcon
Ls0 f80 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f80 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>file on client?</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f80 378 562 28 28 -9 8 #rect
Ls0 f80 @|AlternativeIcon #fIcon
Ls0 f39 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f39 actionTable 'out=in;
' #txt
Ls0 f39 actionCode 'import ch.ivyteam.ivy.admin.tool.domain.util.SaieParameter;

import ch.ivyteam.ivy.admin.tool.report.SaieReport;
import ch.ivyteam.ivy.admin.tool.report.IReport;
import ch.ivyteam.ivy.admin.tool.saexport.IExporter;
import ch.ivyteam.ivy.admin.tool.saexport.EnvironmentExporter;
import ch.ivyteam.ivy.application.restricted.IEnvironment;

try
{
	in.serverReportFile = new File("report.txt", true);
	if (!out.serverReportFile.exists())
	{
		out.serverReportFile.createNewFile();
	}

	in.serverExportResultFile = new java.io.File(in.file.filepath);
	if (in.file.isClient)
	{
		in.serverExportResultFile = (new File("export.txt", true)).getJavaFile();
	}
	if (!in.serverExportResultFile.exists())
	{
		in.serverExportResultFile.createNewFile();
	}
	
	IExporter exporter = new EnvironmentExporter();
	
	SaieParameter params = new SaieParameter();
	params.setEnvironments(in.environments);
	params.setFile(in.serverExportResultFile);
	params.setReport(in.report);
	params.setReportFile(in.serverReportFile.getJavaFile());
	params.setIncludeUsernameAndPassword(panel.ckbInclude.isSelected());
	exporter.export(params);
	out.success = true;
}
catch (Exception ex)
{
	out.success = false;
	out.exception = ex;
}' #txt
Ls0 f39 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f39 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>export</name>
        <nameStyle>6,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f39 374 268 36 24 20 -2 #rect
Ls0 f39 @|RichDialogProcessStepIcon #fIcon
Ls0 f67 targetWindow NEW:card: #txt
Ls0 f67 targetDisplay TOP #txt
Ls0 f67 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ls0 f67 startMethod showError(java.lang.Throwable,Boolean,Boolean) #txt
Ls0 f67 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f67 requestActionDecl '<java.lang.Throwable error, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ls0 f67 requestMappingAction 'param.error=in.exception;
param.showCopyButton=true;
param.showDetailButton=true;
' #txt
Ls0 f67 responseActionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f67 responseMappingAction 'out=in;
' #txt
Ls0 f67 windowConfiguration '{/title "Error in Environment Export"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ls0 f67 isAsynch false #txt
Ls0 f67 isInnerRd true #txt
Ls0 f67 userContext '* ' #txt
Ls0 f67 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>failure</name>
        <nameStyle>7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f67 262 332 36 24 20 -2 #rect
Ls0 f67 @|RichDialogIcon #fIcon
Ls0 f58 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f58 actionTable 'out=in;
' #txt
Ls0 f58 actionCode 'import ch.ivyteam.ivy.common.util.IvyFileUtils;

out.fileTransferResult = IvyFileUtils.transferFileToClient(in.serverExportResultFile, in.file.filepath);
' #txt
Ls0 f58 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f58 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload export
file to client</name>
        <nameStyle>28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f58 374 468 36 24 20 -2 #rect
Ls0 f58 @|RichDialogProcessStepIcon #fIcon
Ls0 f55 targetWindow NEW:card: #txt
Ls0 f55 targetDisplay TOP #txt
Ls0 f55 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ls0 f55 startMethod showError(java.lang.Throwable,Boolean,Boolean) #txt
Ls0 f55 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f55 requestActionDecl '<java.lang.Throwable error, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ls0 f55 requestMappingAction 'param.error=new RuntimeException(in.fileTransferResult.getFailureMessage());
param.showCopyButton=true;
param.showDetailButton=false;
' #txt
Ls0 f55 responseActionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f55 responseMappingAction 'out=in;
' #txt
Ls0 f55 windowConfiguration '{/title "Import Environments"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ls0 f55 isAsynch false #txt
Ls0 f55 isInnerRd true #txt
Ls0 f55 userContext '* ' #txt
Ls0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show error</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f55 294 564 36 24 -41 -35 #rect
Ls0 f55 @|RichDialogIcon #fIcon
Ls0 f61 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f61 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>export 
successful?</name>
        <nameStyle>8,7
11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f61 378 330 28 28 19 -14 #rect
Ls0 f61 @|AlternativeIcon #fIcon
Ls0 f62 expr out #txt
Ls0 f62 392 292 392 330 #arcP
Ls0 f68 expr in #txt
Ls0 f68 378 344 298 344 #arcP
Ls0 f68 0 0.5067340067340068 0 0 #arcLabel
Ls0 f81 expr out #txt
Ls0 f81 392 492 392 515 #arcP
Ls0 f82 expr out #txt
Ls0 f82 392 541 392 562 #arcP
Ls0 f84 expr in #txt
Ls0 f84 outCond 'in.fileTransferResult.hasFailure() || in.fileTransferResult.wasCancelled()' #txt
Ls0 f84 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error</name>
        <nameStyle>5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f84 378 576 330 576 #arcP
Ls0 f86 expr in #txt
Ls0 f86 outCond !in.fileTransferResult.hasCompleted() #txt
Ls0 f86 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f86 406 576 405 528 #arcP
Ls0 f86 1 456 576 #addKink
Ls0 f86 2 456 528 #addKink
Ls0 f86 1 0.5144230769230769 0 0 #arcLabel
Ls0 f57 expr out #txt
Ls0 f57 391 236 392 268 #arcP
Ls0 f3 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f3 guid 13848388B9B2B9EE #txt
Ls0 f3 550 110 20 20 13 0 #rect
Ls0 f3 @|RichDialogEndIcon #fIcon
Ls0 f4 expr out #txt
Ls0 f4 560 74 560 110 #arcP
Ls0 f8 guid 13848453B8D86FC3 #txt
Ls0 f8 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f8 method start(List<ch.ivyteam.ivy.application.restricted.IEnvironment>) #txt
Ls0 f8 disableUIEvents true #txt
Ls0 f8 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<List<ch.ivyteam.ivy.application.restricted.IEnvironment> environments> param = methodEvent.getInputArguments();
' #txt
Ls0 f8 inParameterMapAction 'out.environments=param.environments;
' #txt
Ls0 f8 outParameterDecl '<> result;
' #txt
Ls0 f8 embeddedRdInitializations '{/exportClientServerFileChooser {/fieldName "exportClientServerFileChooser"/startMethod "start(String,String,Boolean)"/parameterMapping "param.filePath=in.file.filepath;\nparam.labelText=\"Export file\";\nparam.onlyDirectories=false;\n"/initScript ""/userContext * }/reportClientServerFileChooser {/fieldName "reportClientServerFileChooser"/startMethod "start(String,String,Boolean)"/parameterMapping "param.filePath=in.reportFile.filepath;\nparam.labelText=\"Export log file\";\nparam.onlyDirectories=false;\n"/initScript ""/userContext * }}' #txt
Ls0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(List&lt;IEnvironment&gt;)</name>
        <nameStyle>25,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f8 174 54 20 20 13 0 #rect
Ls0 f8 @|RichDialogInitStartIcon #fIcon
Ls0 f9 expr out #txt
Ls0 f9 177 71 102 152 #arcP
Ls0 f11 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>export file
on client?</name>
        <nameStyle>12,7
10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f11 378 394 28 28 14 0 #rect
Ls0 f11 @|AlternativeIcon #fIcon
Ls0 f12 expr in #txt
Ls0 f12 outCond in.success #txt
Ls0 f12 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f12 392 358 392 394 #arcP
Ls0 f12 0 0.4722222222222222 -1 0 #arcLabel
Ls0 f13 expr in #txt
Ls0 f13 outCond in.file.isClient #txt
Ls0 f13 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f13 392 422 392 468 #arcP
Ls0 f10 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f10 guid 1385273C03363B61 #txt
Ls0 f10 382 878 20 20 13 0 #rect
Ls0 f10 @|RichDialogEndIcon #fIcon
Ls0 f15 expr out #txt
Ls0 f15 312 588 382 888 #arcP
Ls0 f15 1 312 888 #addKink
Ls0 f15 1 0.7627450980392156 0 0 #arcLabel
Ls0 f16 expr out #txt
Ls0 f16 280 356 382 888 #arcP
Ls0 f16 1 280 888 #addKink
Ls0 f16 0 0.6166803669766772 0 0 #arcLabel
Ls0 f18 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f18 actionTable 'out=in;
' #txt
Ls0 f18 actionCode 'import ch.ivyteam.ivy.common.util.IvyFileUtils;

out.fileTransferResult = IvyFileUtils.transferFileToClient(in.serverReportFile.getJavaFile(), in.reportfile.filepath);
' #txt
Ls0 f18 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>upload report
file to client</name>
        <nameStyle>28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f18 374 716 36 24 20 -2 #rect
Ls0 f18 @|RichDialogProcessStepIcon #fIcon
Ls0 f19 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f19 guid 1385BB86C58A24BA #txt
Ls0 f19 379 763 26 26 13 0 #rect
Ls0 f19 @|RichDialogUiSyncIcon #fIcon
Ls0 f20 targetWindow NEW:card: #txt
Ls0 f20 targetDisplay TOP #txt
Ls0 f20 richDialogId ch.ivyteam.ivy.commondialogs.ErrorDialog #txt
Ls0 f20 startMethod showError(java.lang.Throwable,Boolean,Boolean) #txt
Ls0 f20 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f20 requestActionDecl '<java.lang.Throwable error, Boolean showCopyButton, Boolean showDetailButton> param;' #txt
Ls0 f20 requestMappingAction 'param.error=new RuntimeException(in.fileTransferResult.getFailureMessage());
param.showCopyButton=true;
param.showDetailButton=false;
' #txt
Ls0 f20 responseActionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f20 responseMappingAction 'out=in;
' #txt
Ls0 f20 windowConfiguration '{/title "Import Environments"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ls0 f20 isAsynch false #txt
Ls0 f20 isInnerRd true #txt
Ls0 f20 userContext '* ' #txt
Ls0 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show error</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f20 294 812 36 24 -41 -35 #rect
Ls0 f20 @|RichDialogIcon #fIcon
Ls0 f21 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>file on client?</name>
        <nameStyle>15,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f21 378 810 28 28 -9 8 #rect
Ls0 f21 @|AlternativeIcon #fIcon
Ls0 f22 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>report file
on client?</name>
        <nameStyle>12,7
10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f22 378 642 28 28 14 0 #rect
Ls0 f22 @|AlternativeIcon #fIcon
Ls0 f23 expr out #txt
Ls0 f23 392 740 392 763 #arcP
Ls0 f24 expr out #txt
Ls0 f24 392 789 392 810 #arcP
Ls0 f25 expr in #txt
Ls0 f25 outCond 'in.fileTransferResult.hasFailure() || in.fileTransferResult.wasCancelled()' #txt
Ls0 f25 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>error</name>
        <nameStyle>5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f25 378 824 330 824 #arcP
Ls0 f26 expr in #txt
Ls0 f26 outCond !in.fileTransferResult.hasCompleted() #txt
Ls0 f26 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f26 406 824 405 776 #arcP
Ls0 f26 1 458 824 #addKink
Ls0 f26 2 458 776 #addKink
Ls0 f26 1 0.5144230769230769 0 0 #arcLabel
Ls0 f27 expr in #txt
Ls0 f27 outCond in.reportFile.isClient #txt
Ls0 f27 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>yes</name>
        <nameStyle>3,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f27 392 670 392 716 #arcP
Ls0 f14 expr out #txt
Ls0 f14 312 836 382 888 #arcP
Ls0 f14 1 312 888 #addKink
Ls0 f14 0 0.8240740740740741 0 0 #arcLabel
Ls0 f29 expr in #txt
Ls0 f29 392 838 392 878 #arcP
Ls0 f30 expr in #txt
Ls0 f30 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f30 406 408 406 656 #arcP
Ls0 f30 1 544 408 #addKink
Ls0 f30 2 544 656 #addKink
Ls0 f30 1 0.5015642008394147 0 0 #arcLabel
Ls0 f17 expr in #txt
Ls0 f17 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no</name>
        <nameStyle>2,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f17 406 656 402 888 #arcP
Ls0 f17 1 520 656 #addKink
Ls0 f17 2 520 888 #addKink
Ls0 f17 1 0.5080020011241445 0 0 #arcLabel
Ls0 f31 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f31 378 154 28 28 14 0 #rect
Ls0 f31 @|AlternativeIcon #fIcon
Ls0 f7 expr in #txt
Ls0 f7 outCond !in.file.filepath.isEmpty() #txt
Ls0 f7 392 182 391 212 #arcP
Ls0 f33 targetWindow NEW:card: #txt
Ls0 f33 targetDisplay TOP #txt
Ls0 f33 richDialogId ch.ivyteam.ivy.commondialogs.MessageDialog #txt
Ls0 f33 startMethod showMessage(String) #txt
Ls0 f33 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f33 requestActionDecl '<String message> param;' #txt
Ls0 f33 requestMappingAction 'param.message="No export file was selected! \n\nPlease select the file in which the environments should be exported!";
' #txt
Ls0 f33 responseActionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f33 responseMappingAction 'out=in;
' #txt
Ls0 f33 windowConfiguration '{/title "Export Environment(s)"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Ls0 f33 isAsynch false #txt
Ls0 f33 isInnerRd true #txt
Ls0 f33 userContext '* ' #txt
Ls0 f33 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>no file
dialog</name>
        <nameStyle>8,7
6,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f33 286 156 36 24 20 -2 #rect
Ls0 f33 @|RichDialogIcon #fIcon
Ls0 f34 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f34 214 158 20 20 13 0 #rect
Ls0 f34 @|RichDialogProcessEndIcon #fIcon
Ls0 f35 expr in #txt
Ls0 f35 378 168 322 168 #arcP
Ls0 f36 expr out #txt
Ls0 f36 286 168 234 168 #arcP
Ls0 f37 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f37 actionTable 'out=in;
' #txt
Ls0 f37 actionCode 'in.file = panel.exportClientServerFileChooser.getPath();
in.reportFile = panel.reportClientServerFileChooser.getPath();' #txt
Ls0 f37 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get files</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f37 374 100 36 24 20 -2 #rect
Ls0 f37 @|RichDialogProcessStepIcon #fIcon
Ls0 f38 expr out #txt
Ls0 f38 392 74 392 100 #arcP
Ls0 f32 expr out #txt
Ls0 f32 392 124 392 154 #arcP
Ls0 f40 guid 13ADDF0C62E660F8 #txt
Ls0 f40 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f40 method start() #txt
Ls0 f40 disableUIEvents true #txt
Ls0 f40 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Ls0 f40 outParameterDecl '<> result;
' #txt
Ls0 f40 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start()</name>
    </language>
</elementInfo>
' #txt
Ls0 f40 86 54 20 20 -10 -22 #rect
Ls0 f40 @|RichDialogInitStartIcon #fIcon
Ls0 f41 expr out #txt
Ls0 f41 96 74 96 150 #arcP
Ls0 f0 guid 13B3FC116C8FC23B #txt
Ls0 f0 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f0 method start(ch.ivyteam.ivy.application.IApplication) #txt
Ls0 f0 disableUIEvents true #txt
Ls0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.application.IApplication application> param = methodEvent.getInputArguments();
' #txt
Ls0 f0 inParameterMapAction 'out.environments=param.application.getEnvironments();
' #txt
Ls0 f0 inActionCode 'import java.util.ArrayList;
import ch.ivyteam.ivy.application.restricted.IEnvironment;
import ch.ivyteam.ivy.application.IApplication;
import ch.ivyteam.ivy.application.IApplicationConfigurationManager;
import ch.ivyteam.ivy.server.ServerFactory;
IEnvironment defaultEnv = param.application.findEnvironment(IEnvironment.DEFAULT_ENVIRONMENT_NAME);
if(!out.environments.contains(defaultEnv)){
	out.environments.add(defaultEnv);
}
' #txt
Ls0 f0 outParameterDecl '<> result;
' #txt
Ls0 f0 embeddedRdInitializations '{/exportClientServerFileChooser {/fieldName "exportClientServerFileChooser"/startMethod "start(String,String,Boolean)"/parameterMapping "param.filePath=in.file.filepath;\nparam.labelText=\"Export File\";\nparam.onlyDirectories=false;\n"/initScript ""/userContext * }/reportClientServerFileChooser {/fieldName "reportClientServerFileChooser"/startMethod "start(String,String,Boolean)"/parameterMapping "param.filePath=in.reportFile.filepath;\nparam.labelText=\"Export log file\";\nparam.onlyDirectories=false;\n"/initScript ""/userContext * }}' #txt
Ls0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(IApplication)</name>
        <nameStyle>19,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f0 174 110 20 20 13 0 #rect
Ls0 f0 @|RichDialogInitStartIcon #fIcon
Ls0 f2 expr out #txt
Ls0 f2 174 124 105 155 #arcP
Ls0 f70 actionDecl 'ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData out;
' #txt
Ls0 f70 actionTable 'out=in;
' #txt
Ls0 f70 actionCode 'import ch.ivyteam.io.FileUtil;
import ch.ivyteam.ivy.admin.tool.report.ActionType;
import ch.ivyteam.ivy.admin.tool.domain.util.SaieUtils;
java.io.File persistentReportFileOnServer;
if (in.reportFile.getFilepath().isEmpty() || in.reportFile.isClient) {
	persistentReportFileOnServer = SaieUtils.getReportFile(ActionType.EXPORT);
} else {
	persistentReportFileOnServer = new java.io.File(in.reportFile.getFilepath());	
}

FileUtil.copy(in.serverReportFile.getJavaFile(), persistentReportFileOnServer);' #txt
Ls0 f70 type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
Ls0 f70 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Persist report file on server</name>
        <nameStyle>29,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Ls0 f70 374 612 36 24 20 -2 #rect
Ls0 f70 @|RichDialogProcessStepIcon #fIcon
Ls0 f42 expr out #txt
Ls0 f42 392 636 392 642 #arcP
Ls0 f43 expr in #txt
Ls0 f43 392 590 392 612 #arcP
>Proto Ls0 .type ch.ivyteam.ivy.admin.tool.environment.EnvironmentExport.EnvironmentExportData #txt
>Proto Ls0 .processKind RICH_DIALOG #txt
>Proto Ls0 -8 -8 16 16 16 26 #rect
>Proto Ls0 '' #fIcon
Ls0 f39 mainOut f62 tail #connect
Ls0 f62 head f61 in #connect
Ls0 f68 head f67 mainIn #connect
Ls0 f58 mainOut f81 tail #connect
Ls0 f81 head f78 mainIn #connect
Ls0 f78 mainOut f82 tail #connect
Ls0 f82 head f80 in #connect
Ls0 f80 out f84 tail #connect
Ls0 f84 head f55 mainIn #connect
Ls0 f80 out f86 tail #connect
Ls0 f86 head f78 mainIn #connect
Ls0 f117 mainOut f57 tail #connect
Ls0 f57 head f39 mainIn #connect
Ls0 f6 mainOut f4 tail #connect
Ls0 f4 head f3 mainIn #connect
Ls0 f8 mainOut f9 tail #connect
Ls0 f9 head f1 mainIn #connect
Ls0 f61 out f12 tail #connect
Ls0 f12 head f11 in #connect
Ls0 f61 out f68 tail #connect
Ls0 f11 out f13 tail #connect
Ls0 f13 head f58 mainIn #connect
Ls0 f55 mainOut f15 tail #connect
Ls0 f15 head f10 mainIn #connect
Ls0 f67 mainOut f16 tail #connect
Ls0 f16 head f10 mainIn #connect
Ls0 f18 mainOut f23 tail #connect
Ls0 f23 head f19 mainIn #connect
Ls0 f19 mainOut f24 tail #connect
Ls0 f24 head f21 in #connect
Ls0 f21 out f25 tail #connect
Ls0 f25 head f20 mainIn #connect
Ls0 f21 out f26 tail #connect
Ls0 f26 head f19 mainIn #connect
Ls0 f22 out f27 tail #connect
Ls0 f27 head f18 mainIn #connect
Ls0 f20 mainOut f14 tail #connect
Ls0 f14 head f10 mainIn #connect
Ls0 f21 out f29 tail #connect
Ls0 f29 head f10 mainIn #connect
Ls0 f11 out f30 tail #connect
Ls0 f30 head f22 in #connect
Ls0 f22 out f17 tail #connect
Ls0 f17 head f10 mainIn #connect
Ls0 f31 out f7 tail #connect
Ls0 f7 head f117 mainIn #connect
Ls0 f31 out f35 tail #connect
Ls0 f35 head f33 mainIn #connect
Ls0 f33 mainOut f36 tail #connect
Ls0 f36 head f34 mainIn #connect
Ls0 f5 mainOut f38 tail #connect
Ls0 f38 head f37 mainIn #connect
Ls0 f37 mainOut f32 tail #connect
Ls0 f32 head f31 in #connect
Ls0 f40 mainOut f41 tail #connect
Ls0 f41 head f1 mainIn #connect
Ls0 f0 mainOut f2 tail #connect
Ls0 f2 head f1 mainIn #connect
Ls0 f70 mainOut f42 tail #connect
Ls0 f42 head f22 in #connect
Ls0 f80 out f43 tail #connect
Ls0 f43 head f70 mainIn #connect
