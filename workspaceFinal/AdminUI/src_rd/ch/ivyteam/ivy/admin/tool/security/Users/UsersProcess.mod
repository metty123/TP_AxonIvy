[Ivy]
[>Created: Thu Aug 13 13:49:20 ICT 2015]
1179B78CF0F8936C 3.17 #module
>Proto >Proto Collection #zClass
Us0 UsersProcess Big #zClass
Us0 RD #cInfo
Us0 #process
Us0 @TextInP .xml .xml #zField
Us0 @TextInP .responsibility .responsibility #zField
Us0 @MessageFlowInP-0n messageIn messageIn #zField
Us0 @MessageFlowOutP-0n messageOut messageOut #zField
Us0 @TextInP .resExport .resExport #zField
Us0 @TextInP .type .type #zField
Us0 @TextInP .processKind .processKind #zField
Us0 @AnnotationInP-0n ai ai #zField
Us0 @TextInP .ui2RdDataAction .ui2RdDataAction #zField
Us0 @TextInP .rdData2UIAction .rdData2UIAction #zField
Us0 @RichDialogInitStart f0 '' #zField
Us0 @RichDialogProcessStep f1 '' #zField
Us0 @RichDialogProcessEnd f2 '' #zField
Us0 @RichDialogProcessStart f3 '' #zField
Us0 @RichDialogEnd f4 '' #zField
Us0 @PushWFArc f5 '' #zField
Us0 @PushWFArc f6 '' #zField
Us0 @RichDialogProcessStart f8 '' #zField
Us0 @RichDialogProcessEnd f9 '' #zField
Us0 @RichDialog f10 '' #zField
Us0 @PushWFArc f12 '' #zField
Us0 @RichDialogProcessStart f13 '' #zField
Us0 @RichDialogProcessEnd f14 '' #zField
Us0 @RichDialogProcessStart f16 '' #zField
Us0 @RichDialogProcessEnd f17 '' #zField
Us0 @RichDialog f18 '' #zField
Us0 @PushWFArc f20 '' #zField
Us0 @RichDialogProcessStart f21 '' #zField
Us0 @RichDialogProcessStart f22 '' #zField
Us0 @RichDialogProcessEnd f23 '' #zField
Us0 @RichDialogProcessEnd f24 '' #zField
Us0 @RichDialogProcessStart f25 '' #zField
Us0 @RichDialogProcessEnd f26 '' #zField
Us0 @RichDialog f27 '' #zField
Us0 @RichDialog f28 '' #zField
Us0 @RichDialog f29 '' #zField
Us0 @PushWFArc f30 '' #zField
Us0 @PushWFArc f33 '' #zField
Us0 @Alternative f34 '' #zField
Us0 @RichDialogProcessStep f35 '' #zField
Us0 @PushWFArc f38 '' #zField
Us0 @PushWFArc f39 '' #zField
Us0 @RichDialogProcessStart f41 '' #zField
Us0 @RichDialogProcessEnd f42 '' #zField
Us0 @RichDialog f43 '' #zField
Us0 @PushWFArc f45 '' #zField
Us0 @Alternative f46 '' #zField
Us0 @PushWFArc f47 '' #zField
Us0 @PushWFArc f11 '' #zField
Us0 @Alternative f48 '' #zField
Us0 @PushWFArc f49 '' #zField
Us0 @PushWFArc f19 '' #zField
Us0 @Alternative f50 '' #zField
Us0 @PushWFArc f51 '' #zField
Us0 @PushWFArc f32 '' #zField
Us0 @PushWFArc f52 '' #zField
Us0 @PushWFArc f53 '' #zField
Us0 @PushWFArc f54 '' #zField
Us0 @Alternative f55 '' #zField
Us0 @PushWFArc f56 '' #zField
Us0 @PushWFArc f57 '' #zField
Us0 @Alternative f58 '' #zField
Us0 @PushWFArc f59 '' #zField
Us0 @PushWFArc f44 '' #zField
Us0 @PushWFArc f60 '' #zField
Us0 @RichDialogProcessStart f61 '' #zField
Us0 @RichDialogProcessEnd f62 '' #zField
Us0 @Alternative f63 '' #zField
Us0 @RichDialog f64 '' #zField
Us0 @PushWFArc f65 '' #zField
Us0 @PushWFArc f66 '' #zField
Us0 @PushWFArc f67 '' #zField
Us0 @PushWFArc f68 '' #zField
Us0 @RichDialogProcessStart f69 '' #zField
Us0 @RichDialogProcessStart f71 '' #zField
Us0 @RichDialogProcessEnd f72 '' #zField
Us0 @RichDialogProcessStep f74 '' #zField
Us0 @PushWFArc f75 '' #zField
Us0 @PushWFArc f73 '' #zField
Us0 @RichDialogProcessStep f94 '' #zField
Us0 @PushWFArc f95 '' #zField
Us0 @PushWFArc f7 '' #zField
Us0 @PushWFArc f106 '' #zField
Us0 @RichDialogMethodStart f31 '' #zField
Us0 @RichDialogProcessEnd f98 '' #zField
Us0 @PushWFArc f105 '' #zField
Us0 @PushWFArc f110 '' #zField
Us0 @RichDialogProcessEnd f96 '' #zField
Us0 @CallSub f97 '' #zField
Us0 @PushWFArc f112 '' #zField
Us0 @RichDialogMethodStart f113 '' #zField
Us0 @RichDialogProcessStep f118 '' #zField
Us0 @PushWFArc f111 '' #zField
Us0 @PushWFArc f120 '' #zField
Us0 @Alternative f78 '' #zField
Us0 @RichDialogProcessStep f81 '' #zField
Us0 @PushWFArc f82 '' #zField
Us0 @PushWFArc f79 '' #zField
Us0 @PushWFArc f36 '' #zField
Us0 @RichDialog f83 '' #zField
Us0 @PushWFArc f84 '' #zField
Us0 @PushWFArc f80 '' #zField
Us0 @PushWFArc f85 '' #zField
Us0 @CallSub f77 '' #zField
Us0 @PushWFArc f86 '' #zField
Us0 @PushWFArc f76 '' #zField
Us0 @CallSub f37 '' #zField
Us0 @PushWFArc f40 '' #zField
Us0 @PushWFArc f70 '' #zField
>Proto Us0 Us0 UsersProcess #zField
Us0 f0 guid 1179B7C738249CC8 #txt
Us0 f0 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f0 method start(ch.ivyteam.ivy.application.IApplication) #txt
Us0 f0 disableUIEvents false #txt
Us0 f0 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<ch.ivyteam.ivy.application.IApplication application> param = methodEvent.getInputArguments();
' #txt
Us0 f0 inActionCode 'import javax.persistence.PersistenceException;
try
{
	out.application = param.application;
	out.securityContext = param.application.getSecurityContext();
	out.securityDescriptor = param.application.getSecurityDescriptor();
} 
catch (PersistenceException ex)
{
 	out.exception = ex;
}' #txt
Us0 f0 outParameterDecl '<> result;
' #txt
Us0 f0 embeddedRdInitializations '* ' #txt
Us0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>start(ISecurityContext)</name>
        <nameStyle>23,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f0 46 38 20 20 13 0 #rect
Us0 f0 @|RichDialogInitStartIcon #fIcon
Us0 f1 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f1 actionTable 'out=in;
' #txt
Us0 f1 actionCode 'import ch.ivyteam.ivy.admin.tool.util.CollectionSorts;
import ch.ivyteam.ivy.admin.tool.util.IvyUsers;
import ch.ivyteam.ivy.admin.tool.deploymentwizardserver.common.IvySystemInfoUtil;
import ch.ivyteam.ivy.security.IUser;
import ch.ivyteam.ivy.security.ISecurityConstants;

List<IUser> loggedInUsers = IvySystemInfoUtil.getLoggedInUsers(in.securityContext);

java.util.List<IUser> allUsers = new java.util.ArrayList<IUser>(in.securityContext.getUsers());
IvyUsers.removeSystemUserFrom(allUsers);

for (IUser user : allUsers)
{
	Boolean isLoggedIn = false;
	for (IUser loggedInUser : loggedInUsers)
	{
		if (user.getId() == loggedInUser.getId())
		{
			isLoggedIn = true;
			break;
		}
	}
	ivy.session.setAttribute(user.getId().toString(), isLoggedIn);
}
CollectionSorts.sortUserByName(allUsers);
in.originalUsers = allUsers;
in.users = allUsers;

' #txt
Us0 f1 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init user list</name>
        <nameStyle>14,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f1 38 100 36 24 20 -2 #rect
Us0 f1 @|RichDialogProcessStepIcon #fIcon
Us0 f2 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f2 43 203 26 26 14 0 #rect
Us0 f2 @|RichDialogProcessEndIcon #fIcon
Us0 f3 guid 1179B7C93B9363CC #txt
Us0 f3 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f3 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f3 actionTable 'out=in;
' #txt
Us0 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>ok</name>
        <nameStyle>2,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f3 262 38 20 20 13 0 #rect
Us0 f3 @|RichDialogProcessStartIcon #fIcon
Us0 f4 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f4 guid 1179B7C9C4347F54 #txt
Us0 f4 259 171 26 26 14 0 #rect
Us0 f4 @|RichDialogEndIcon #fIcon
Us0 f5 expr out #txt
Us0 f5 272 58 272 171 #arcP
Us0 f6 expr out #txt
Us0 f6 56 58 56 100 #arcP
Us0 f8 guid 117A75F1B6E823B0 #txt
Us0 f8 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f8 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f8 actionTable 'out=in;
' #txt
Us0 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>permissions</name>
        <nameStyle>11,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f8 46 278 20 20 13 0 #rect
Us0 f8 @|RichDialogProcessStartIcon #fIcon
Us0 f9 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f9 43 483 26 26 14 0 #rect
Us0 f9 @|RichDialogProcessEndIcon #fIcon
Us0 f10 targetWindow NEW:card: #txt
Us0 f10 targetDisplay TOP #txt
Us0 f10 richDialogId ch.ivyteam.ivy.admin.tool.security.Permissions #txt
Us0 f10 startMethod start(ch.ivyteam.ivy.security.ISecurityMember,ch.ivyteam.ivy.security.ISecurityDescriptor) #txt
Us0 f10 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f10 requestActionDecl '<ch.ivyteam.ivy.security.ISecurityMember securityMember, ch.ivyteam.ivy.security.ISecurityDescriptor securityDesriptor> param;' #txt
Us0 f10 requestMappingAction 'param.securityMember=in.selectedUser;
param.securityDesriptor=in.securityDescriptor;
' #txt
Us0 f10 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f10 responseMappingAction 'out=in;
' #txt
Us0 f10 windowConfiguration '{/title "Permissions of <%=in.selectedUser.getFullName().trim().length() > 0 ? in.selectedUser.getFullName() : in.selectedUser.getName()%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f10 isAsynch false #txt
Us0 f10 isInnerRd true #txt
Us0 f10 isDialog true #txt
Us0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open permission dialog</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f10 38 396 36 24 22 -15 #rect
Us0 f10 @|RichDialogIcon #fIcon
Us0 f12 expr out #txt
Us0 f12 56 420 56 483 #arcP
Us0 f13 guid 117A76B5F58C81CD #txt
Us0 f13 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f13 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f13 actionTable 'out=in;
' #txt
Us0 f13 actionCode panel.getAllUsers(); #txt
Us0 f13 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>selected</name>
        <nameStyle>8,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f13 334 38 20 20 13 0 #rect
Us0 f13 @|RichDialogProcessStartIcon #fIcon
Us0 f14 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f14 331 171 26 26 14 0 #rect
Us0 f14 @|RichDialogProcessEndIcon #fIcon
Us0 f16 guid 117AB3168D38E57F #txt
Us0 f16 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f16 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f16 actionTable 'out=in;
' #txt
Us0 f16 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>roles</name>
        <nameStyle>5,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f16 222 278 20 20 13 0 #rect
Us0 f16 @|RichDialogProcessStartIcon #fIcon
Us0 f17 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f17 219 483 26 26 14 0 #rect
Us0 f17 @|RichDialogProcessEndIcon #fIcon
Us0 f18 targetWindow NEW:card: #txt
Us0 f18 targetDisplay TOP #txt
Us0 f18 richDialogId ch.ivyteam.ivy.admin.tool.security.UserRoles #txt
Us0 f18 startMethod start(ch.ivyteam.ivy.security.IUser,ch.ivyteam.ivy.application.IApplication) #txt
Us0 f18 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f18 requestActionDecl '<ch.ivyteam.ivy.security.IUser user, ch.ivyteam.ivy.application.IApplication application> param;' #txt
Us0 f18 requestMappingAction 'param.user=in.selectedUser;
param.application=in.application;
' #txt
Us0 f18 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f18 responseMappingAction 'out=in;
' #txt
Us0 f18 windowConfiguration '{/title "Roles of user <%=in.selectedUser.getFullName().trim().length() > 0 ? in.selectedUser.getFullName() : in.selectedUser.getName()%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f18 isAsynch false #txt
Us0 f18 isInnerRd true #txt
Us0 f18 isDialog true #txt
Us0 f18 userContext '* ' #txt
Us0 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open roles dialog</name>
        <nameStyle>17,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f18 214 396 36 24 20 -2 #rect
Us0 f18 @|RichDialogIcon #fIcon
Us0 f20 expr out #txt
Us0 f20 232 420 232 483 #arcP
Us0 f21 guid 117B1754EB421830 #txt
Us0 f21 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f21 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f21 actionTable 'out=in;
' #txt
Us0 f21 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>create</name>
        <nameStyle>6,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f21 310 598 20 20 13 0 #rect
Us0 f21 @|RichDialogProcessStartIcon #fIcon
Us0 f22 guid 117B175560A582F5 #txt
Us0 f22 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f22 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f22 actionTable 'out=in;
' #txt
Us0 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>edit</name>
        <nameStyle>4,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f22 454 598 20 20 13 0 #rect
Us0 f22 @|RichDialogProcessStartIcon #fIcon
Us0 f23 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f23 307 771 26 26 14 0 #rect
Us0 f23 @|RichDialogProcessEndIcon #fIcon
Us0 f24 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f24 451 771 26 26 14 0 #rect
Us0 f24 @|RichDialogProcessEndIcon #fIcon
Us0 f25 guid 117B1757709E8F1A #txt
Us0 f25 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f25 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f25 actionTable 'out=in;
' #txt
Us0 f25 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>delete</name>
        <nameStyle>6,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f25 118 566 20 20 13 0 #rect
Us0 f25 @|RichDialogProcessStartIcon #fIcon
Us0 f26 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f26 115 1123 26 26 14 0 #rect
Us0 f26 @|RichDialogProcessEndIcon #fIcon
Us0 f27 targetWindow NEW:card: #txt
Us0 f27 targetDisplay TOP #txt
Us0 f27 richDialogId ch.ivyteam.ivy.admin.tool.security.User #txt
Us0 f27 startMethod start(ch.ivyteam.ivy.security.ISecurityContext) #txt
Us0 f27 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f27 requestActionDecl '<ch.ivyteam.ivy.security.ISecurityContext securityContext> param;' #txt
Us0 f27 requestMappingAction 'param.securityContext=in.securityContext;
' #txt
Us0 f27 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f27 responseMappingAction 'out=in;
' #txt
Us0 f27 responseActionCode 'import ch.ivyteam.ivy.admin.tool.util.CollectionSorts;
import ch.ivyteam.ivy.security.IUser;

if (result.#createdUser != null)
{
	java.util.List<IUser> users = in.originalUsers;
	users.add(result.createdUser);
	CollectionSorts.sortUserByName(users);
  in.users = users;
	in.originalUsers = users;
	panel.getAllUsers();
	panel.filter();
}' #txt
Us0 f27 windowConfiguration '{/title "Create new user"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f27 isAsynch false #txt
Us0 f27 isInnerRd true #txt
Us0 f27 isDialog true #txt
Us0 f27 userContext '* ' #txt
Us0 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>open create
user dialog</name>
        <nameStyle>23,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f27 302 692 36 24 20 -2 #rect
Us0 f27 @|RichDialogIcon #fIcon
Us0 f28 targetWindow NEW #txt
Us0 f28 targetDisplay TOP #txt
Us0 f28 richDialogId ch.ivyteam.ivy.admin.tool.security.User #txt
Us0 f28 startMethod start(ch.ivyteam.ivy.security.IUser) #txt
Us0 f28 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f28 requestActionDecl '<ch.ivyteam.ivy.security.IUser user> param;' #txt
Us0 f28 requestMappingAction 'param.user=in.selectedUser;
' #txt
Us0 f28 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f28 responseMappingAction 'out=in;
' #txt
Us0 f28 responseActionCode in.users.elementChanged(in.selectedUser); #txt
Us0 f28 windowConfiguration '#Mon Apr 14 09:04:30 CEST 2008
height=0
maximized=false
centered=true
close_after_last_rd=true
resizable=true
width=0
title=Edit user <%\\=in.selectedUser.getFullName()\\!\\=null?in.selectedUser.getFullName()\\:in.selectedUser.getName()%>
' #txt
Us0 f28 isAsynch false #txt
Us0 f28 isInnerRd true #txt
Us0 f28 isDialog true #txt
Us0 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open user edit dialog</name>
        <nameStyle>21,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f28 446 700 36 24 20 -2 #rect
Us0 f28 @|RichDialogIcon #fIcon
Us0 f29 targetWindow NEW:card: #txt
Us0 f29 targetDisplay TOP #txt
Us0 f29 richDialogId ch.ivyteam.ivy.commondialogs.QuestionDialog #txt
Us0 f29 startMethod askQuestion(String,String,List<String>) #txt
Us0 f29 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f29 requestActionDecl '<String icon, String question, List<String> buttons> param;' #txt
Us0 f29 requestMappingAction 'param.icon="question";
param.buttons=["yes", "no"];
' #txt
Us0 f29 requestActionCode 'param.question = ivy.cms.co("/ch/ivyteam/ivy/admin/user/deleteUserConfirmation");' #txt
Us0 f29 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f29 responseMappingAction 'out=in;
out.answer=result.pressedButton;
' #txt
Us0 f29 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/admin/user/deleteUsers\")%>"/width 350 /height 150 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f29 isAsynch false #txt
Us0 f29 isInnerRd true #txt
Us0 f29 isDialog true #txt
Us0 f29 userContext '* ' #txt
Us0 f29 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show Confirm </name>
        <nameStyle>13,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f29 110 804 36 24 23 -7 #rect
Us0 f29 @|RichDialogIcon #fIcon
Us0 f30 expr out #txt
Us0 f30 320 618 320 692 #arcP
Us0 f33 expr out #txt
Us0 f33 464 724 464 771 #arcP
Us0 f34 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f34 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete?</name>
        <nameStyle>7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f34 114 866 28 28 23 -8 #rect
Us0 f34 @|AlternativeIcon #fIcon
Us0 f35 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f35 actionTable 'out=in;
' #txt
Us0 f35 actionCode 'import ch.ivyteam.ivy.persistence.PersistencyException;
import ch.ivyteam.ivy.security.IUser;

in.exception = null;

try 
{
	for(IUser iUser : in.listSelectedUser)
	{
		in.securityContext.deleteUser(iUser.getName());
		
		in.originalUsers.remove(iUser);
	}
	in.users = in.originalUsers;
}

catch (PersistencyException e) 
{
	in.exception = e;
}

if (in.users.size() == 0)
{
	in.listSelectedUser.clear();
	panel.permissionsButton.setEnabled(false);
	panel.deleteButton.setEnabled(false);
	panel.rolesButton.setEnabled(false);
	panel.editButton.setEnabled(false);
	panel.systemPermissionButton.setEnabled(false);
}' #txt
Us0 f35 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f35 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Delete user</name>
        <nameStyle>11,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f35 110 940 36 24 24 -10 #rect
Us0 f35 @|RichDialogProcessStepIcon #fIcon
Us0 f38 expr in #txt
Us0 f38 outCond 'in.answer == "yes"' #txt
Us0 f38 128 894 128 940 #arcP
Us0 f39 expr in #txt
Us0 f39 114 880 123 1123 #arcP
Us0 f39 1 96 880 #addKink
Us0 f39 2 96 1056 #addKink
Us0 f39 1 0.29978804220731287 0 0 #arcLabel
Us0 f41 guid 117CA0E50E8267CB #txt
Us0 f41 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f41 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f41 actionTable 'out=in;
' #txt
Us0 f41 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>systemPermissions</name>
        <nameStyle>17,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f41 374 278 20 20 13 0 #rect
Us0 f41 @|RichDialogProcessStartIcon #fIcon
Us0 f42 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f42 371 483 26 26 14 0 #rect
Us0 f42 @|RichDialogProcessEndIcon #fIcon
Us0 f43 targetWindow NEW:card: #txt
Us0 f43 targetDisplay TOP #txt
Us0 f43 richDialogId ch.ivyteam.ivy.admin.tool.security.Permissions #txt
Us0 f43 startMethod start(ch.ivyteam.ivy.security.ISecurityMember,ch.ivyteam.ivy.security.ISecurityDescriptor) #txt
Us0 f43 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f43 requestActionDecl '<ch.ivyteam.ivy.security.ISecurityMember securityMember, ch.ivyteam.ivy.security.ISecurityDescriptor securityDesriptor> param;' #txt
Us0 f43 requestMappingAction 'param.securityMember=in.selectedUser;
' #txt
Us0 f43 requestActionCode 'import ch.ivyteam.ivy.server.ServerFactory;

param.securityDesriptor = ServerFactory.getServer().getSecurityManager().getSystemSecurityDescriptor();' #txt
Us0 f43 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f43 responseMappingAction 'out=in;
' #txt
Us0 f43 windowConfiguration '{/title "System Permissions of <%=in.selectedUser.getFullName().trim().length() > 0 ? in.selectedUser.getFullName() : in.selectedUser.getName()%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f43 isAsynch false #txt
Us0 f43 isInnerRd true #txt
Us0 f43 isDialog true #txt
Us0 f43 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Show system 
permission dialog</name>
        <nameStyle>30,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f43 366 396 36 24 24 -9 #rect
Us0 f43 @|RichDialogIcon #fIcon
Us0 f45 expr out #txt
Us0 f45 384 420 384 483 #arcP
Us0 f46 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f46 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f46 42 322 28 28 22 -8 #rect
Us0 f46 @|AlternativeIcon #fIcon
Us0 f47 expr out #txt
Us0 f47 56 298 56 322 #arcP
Us0 f11 expr in #txt
Us0 f11 outCond 'in.#selectedUser != null' #txt
Us0 f11 56 350 56 396 #arcP
Us0 f48 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f48 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f48 218 322 28 28 23 -8 #rect
Us0 f48 @|AlternativeIcon #fIcon
Us0 f49 expr out #txt
Us0 f49 232 298 232 322 #arcP
Us0 f19 expr in #txt
Us0 f19 outCond 'in.#selectedUser != null' #txt
Us0 f19 232 350 232 396 #arcP
Us0 f50 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f50 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f50 450 650 28 28 14 0 #rect
Us0 f50 @|AlternativeIcon #fIcon
Us0 f51 expr out #txt
Us0 f51 464 618 464 650 #arcP
Us0 f32 expr in #txt
Us0 f32 outCond 'in.#selectedUser != null' #txt
Us0 f32 464 678 464 700 #arcP
Us0 f52 expr in #txt
Us0 f52 42 336 43 496 #arcP
Us0 f52 1 24 336 #addKink
Us0 f52 2 24 496 #addKink
Us0 f52 1 0.43899881824729514 0 0 #arcLabel
Us0 f53 expr in #txt
Us0 f53 218 336 219 496 #arcP
Us0 f53 1 200 336 #addKink
Us0 f53 2 200 496 #addKink
Us0 f53 1 0.43899881824729514 0 0 #arcLabel
Us0 f54 expr in #txt
Us0 f54 450 664 451 784 #arcP
Us0 f54 1 432 664 #addKink
Us0 f54 2 432 784 #addKink
Us0 f54 1 0.43899881824729514 0 0 #arcLabel
Us0 f55 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f55 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f55 114 610 28 28 22 -7 #rect
Us0 f55 @|AlternativeIcon #fIcon
Us0 f56 expr out #txt
Us0 f56 128 586 128 610 #arcP
Us0 f57 expr in #txt
Us0 f57 114 624 120 1125 #arcP
Us0 f57 1 80 624 #addKink
Us0 f57 2 80 744 #addKink
Us0 f57 3 56 768 #addKink
Us0 f57 4 80 760 #addKink
Us0 f57 5 80 1064 #addKink
Us0 f57 1 0.5274467307635073 0 0 #arcLabel
Us0 f58 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f58 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f58 370 322 28 28 19 -9 #rect
Us0 f58 @|AlternativeIcon #fIcon
Us0 f59 expr out #txt
Us0 f59 384 298 384 322 #arcP
Us0 f44 expr in #txt
Us0 f44 outCond 'in.#selectedUser != null' #txt
Us0 f44 384 350 384 396 #arcP
Us0 f60 expr in #txt
Us0 f60 370 336 371 496 #arcP
Us0 f60 1 352 336 #addKink
Us0 f60 2 352 496 #addKink
Us0 f60 1 0.412357485456721 0 0 #arcLabel
Us0 f61 guid 126BDC43D0D68FF1 #txt
Us0 f61 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f61 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f61 actionTable 'out=in;
' #txt
Us0 f61 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>properties</name>
        <nameStyle>10,5,6,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f61 534 278 20 20 13 0 #rect
Us0 f61 @|RichDialogProcessStartIcon #fIcon
Us0 f62 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f62 531 483 26 26 14 0 #rect
Us0 f62 @|RichDialogProcessEndIcon #fIcon
Us0 f63 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f63 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>User selected?</name>
        <nameStyle>14,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f63 530 322 28 28 27 -6 #rect
Us0 f63 @|AlternativeIcon #fIcon
Us0 f64 targetWindow NEW:card: #txt
Us0 f64 targetDisplay TOP #txt
Us0 f64 richDialogId ch.ivyteam.ivy.admin.tool.security.UserProperties #txt
Us0 f64 startMethod start(ch.ivyteam.ivy.security.IUser) #txt
Us0 f64 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f64 requestActionDecl '<ch.ivyteam.ivy.security.IUser user> param;' #txt
Us0 f64 requestMappingAction 'param.user=in.selectedUser;
' #txt
Us0 f64 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f64 responseMappingAction 'out=in;
' #txt
Us0 f64 windowConfiguration '{/title "Properties of user <%=in.selectedUser.getFullName().trim().length() > 0 ? in.selectedUser.getFullName() : in.selectedUser.getName()%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f64 isAsynch false #txt
Us0 f64 isInnerRd true #txt
Us0 f64 isDialog true #txt
Us0 f64 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Open properties
dialog</name>
        <nameStyle>22,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f64 526 396 36 24 20 -2 #rect
Us0 f64 @|RichDialogIcon #fIcon
Us0 f65 expr out #txt
Us0 f65 544 420 544 483 #arcP
Us0 f66 expr out #txt
Us0 f66 544 298 544 322 #arcP
Us0 f67 expr in #txt
Us0 f67 outCond 'in.#selectedUser != null' #txt
Us0 f67 544 350 544 396 #arcP
Us0 f68 expr in #txt
Us0 f68 530 336 531 496 #arcP
Us0 f68 1 512 336 #addKink
Us0 f68 2 512 496 #addKink
Us0 f68 1 0.503125 0 0 #arcLabel
Us0 f69 guid 126C1C026A046253 #txt
Us0 f69 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f69 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f69 actionTable 'out=in;
' #txt
Us0 f69 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Load</name>
        <nameStyle>4,5,7,9
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f69 430 38 20 20 13 0 #rect
Us0 f69 @|RichDialogProcessStartIcon #fIcon
Us0 f71 guid 13E450D6761C4557 #txt
Us0 f71 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f71 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f71 actionTable 'out=in;
' #txt
Us0 f71 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>unload</name>
        <nameStyle>6,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f71 582 38 20 20 13 0 #rect
Us0 f71 @|RichDialogProcessStartIcon #fIcon
Us0 f72 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f72 582 166 20 20 13 0 #rect
Us0 f72 @|RichDialogProcessEndIcon #fIcon
Us0 f74 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f74 actionTable 'out=in;
' #txt
Us0 f74 actionCode 'import ch.ivyteam.ivy.security.ISecurityConstants;
import ch.ivyteam.ivy.security.IUser;

for (IUser user : in.securityContext.getUsers())
{
	if (!ISecurityConstants.SYSTEM_USER_NAME.equals(user.getName()))
	{
		ivy.session.removeAttribute(user.getId().toString());
	}	
}' #txt
Us0 f74 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f74 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>remove session attributes</name>
        <nameStyle>25,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f74 574 100 36 24 20 -2 #rect
Us0 f74 @|RichDialogProcessStepIcon #fIcon
Us0 f75 expr out #txt
Us0 f75 592 58 592 100 #arcP
Us0 f73 expr out #txt
Us0 f73 592 124 592 166 #arcP
Us0 f94 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f94 actionTable 'out=in;
' #txt
Us0 f94 actionCode panel.getAllUsers(); #txt
Us0 f94 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f94 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>total users in all applications</name>
        <nameStyle>31,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f94 38 148 36 24 20 -2 #rect
Us0 f94 @|RichDialogProcessStepIcon #fIcon
Us0 f95 expr out #txt
Us0 f95 56 124 56 148 #arcP
Us0 f7 expr out #txt
Us0 f7 56 172 56 203 #arcP
Us0 f106 expr out #txt
Us0 f106 320 716 320 771 #arcP
Us0 f31 guid 13FEB981594543CE #txt
Us0 f31 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f31 method getAllUsers() #txt
Us0 f31 disableUIEvents false #txt
Us0 f31 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Us0 f31 inActionCode 'import ch.ivyteam.ivy.admin.tool.ApplicationService;

ApplicationService applicaitonService = new ApplicationService();
panel.lblNumberOfUsers.text = ivy.cms.co("/ch/ivyteam/ivy/admin/user/usersOverAllApplications") + applicaitonService.getUsersOverAllApplication();' #txt
Us0 f31 outParameterDecl '<> result;
' #txt
Us0 f31 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>getAllUsers()</name>
        <nameStyle>13,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f31 830 30 20 20 13 0 #rect
Us0 f31 @|RichDialogMethodStartIcon #fIcon
Us0 f98 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f98 830 174 20 20 13 0 #rect
Us0 f98 @|RichDialogProcessEndIcon #fIcon
Us0 f105 expr out #txt
Us0 f105 840 50 840 174 #arcP
Us0 f110 expr out #txt
Us0 f110 344 58 344 171 #arcP
Us0 f96 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f96 1022 190 20 20 13 0 #rect
Us0 f96 @|RichDialogProcessEndIcon #fIcon
Us0 f97 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f97 processCall 'Functional Processes/filter:filter(String,List)' #txt
Us0 f97 doCall true #txt
Us0 f97 requestActionDecl '<java.lang.String keyword,List<java.lang.Object> listToBeFiltered> param;
' #txt
Us0 f97 requestMappingAction 'param.keyword=in.keyword;
param.listToBeFiltered=in.originalUsers;
' #txt
Us0 f97 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f97 responseMappingAction 'out=in;
out.users=result.filteredList;
' #txt
Us0 f97 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filter(String,List)</name>
        <nameStyle>19,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f97 1014 132 36 24 20 -2 #rect
Us0 f97 @|CallSubIcon #fIcon
Us0 f112 expr out #txt
Us0 f112 1032 156 1032 190 #arcP
Us0 f113 guid 1400AD98CB4E9F2B #txt
Us0 f113 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f113 method filter() #txt
Us0 f113 disableUIEvents false #txt
Us0 f113 inParameterDecl 'ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent methodEvent = event as ch.ivyteam.ivy.richdialog.exec.RdMethodCallEvent;
<> param = methodEvent.getInputArguments();
' #txt
Us0 f113 outParameterDecl '<> result;
' #txt
Us0 f113 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>filter()</name>
        <nameStyle>8,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f113 1022 22 20 20 13 0 #rect
Us0 f113 @|RichDialogMethodStartIcon #fIcon
Us0 f118 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f118 actionTable 'out=in;
' #txt
Us0 f118 actionCode 'out.keyword = panel.lookupUsers.text.trim();' #txt
Us0 f118 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f118 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>get keyword from UI</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f118 1014 76 36 24 20 -2 #rect
Us0 f118 @|RichDialogProcessStepIcon #fIcon
Us0 f111 expr out #txt
Us0 f111 1032 100 1032 132 #arcP
Us0 f120 expr out #txt
Us0 f120 1032 42 1032 76 #arcP
Us0 f78 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f78 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>List Have One 
User Online?</name>
        <nameStyle>27,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f78 114 738 28 28 23 -9 #rect
Us0 f78 @|AlternativeIcon #fIcon
Us0 f81 actionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f81 actionTable 'out=in;
' #txt
Us0 f81 actionCode 'import ch.ivyteam.ivy.security.IUser;

in.isListContainUserOnline = false;
for(IUser iUser : in.listSelectedUser){
	if(ivy.session.getAttribute(iUser.getId().toString()) != null 
	&& (ivy.session.getAttribute(iUser.getId().toString()) as Boolean)){
			in.isListContainUserOnline = true;
			break;
		}
}' #txt
Us0 f81 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f81 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Check List Have
One User Online</name>
        <nameStyle>31,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f81 110 676 36 24 25 -10 #rect
Us0 f81 @|RichDialogProcessStepIcon #fIcon
Us0 f82 expr in #txt
Us0 f82 outCond 'in.listSelectedUser.isEmpty() == false' #txt
Us0 f82 128 638 128 676 #arcP
Us0 f79 expr out #txt
Us0 f79 128 700 128 738 #arcP
Us0 f36 expr in #txt
Us0 f36 128 766 128 804 #arcP
Us0 f83 targetWindow NEW:card: #txt
Us0 f83 targetDisplay TOP #txt
Us0 f83 richDialogId ch.ivyteam.ivy.commondialogs.QuestionDialog #txt
Us0 f83 startMethod askQuestion(String,String,List<String>) #txt
Us0 f83 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f83 requestActionDecl '<String icon, String question, List<String> buttons> param;' #txt
Us0 f83 requestMappingAction 'param.icon="error";
param.question=ivy.cms.co("/ch/ivyteam/ivy/admin/user/cannotDeleteUserMessage");
param.buttons=["ok"];
' #txt
Us0 f83 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f83 responseMappingAction 'out=in;
' #txt
Us0 f83 windowConfiguration '{/title "<%=ivy.cms.co(\"/ch/ivyteam/ivy/server/deploymentWizard/dialogTitle/error\")%>"/width 0 /height 0 /centered true /resizable true /maximized false /close_after_last_rd true }' #txt
Us0 f83 isAsynch false #txt
Us0 f83 isInnerRd true #txt
Us0 f83 userContext '* ' #txt
Us0 f83 22 924 36 24 20 -2 #rect
Us0 f83 @|RichDialogIcon #fIcon
Us0 f84 expr in #txt
Us0 f84 outCond in.isListContainUserOnline #txt
Us0 f84 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Yes
</name>
        <nameStyle>4,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f84 114 752 40 924 #arcP
Us0 f84 1 40 752 #addKink
Us0 f84 1 0.5015625 0 0 #arcLabel
Us0 f80 expr out #txt
Us0 f80 40 948 115 1136 #arcP
Us0 f80 1 40 1136 #addKink
Us0 f80 1 0.5215461417004308 0 0 #arcLabel
Us0 f85 expr out #txt
Us0 f85 128 828 128 866 #arcP
Us0 f77 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f77 processCall 'Functional Processes/showError:showError(java.lang.Exception)' #txt
Us0 f77 doCall true #txt
Us0 f77 requestActionDecl '<java.lang.Exception exception> param;
' #txt
Us0 f77 requestMappingAction 'param.exception=in.exception;
' #txt
Us0 f77 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f77 responseMappingAction 'out=in;
' #txt
Us0 f77 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>show delete error if any</name>
        <nameStyle>24,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f77 110 1012 36 24 20 -2 #rect
Us0 f77 @|CallSubIcon #fIcon
Us0 f86 expr out #txt
Us0 f86 128 964 128 1012 #arcP
Us0 f76 expr out #txt
Us0 f76 128 1036 128 1123 #arcP
Us0 f37 type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
Us0 f37 processCall 'Functional Processes/showError:showError(java.lang.Exception)' #txt
Us0 f37 doCall true #txt
Us0 f37 requestActionDecl '<java.lang.Exception exception> param;
' #txt
Us0 f37 requestMappingAction 'param.exception=in.exception;
' #txt
Us0 f37 responseActionDecl 'ch.ivyteam.ivy.admin.tool.security.Users.UsersData out;
' #txt
Us0 f37 responseMappingAction 'out=in;
' #txt
Us0 f37 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>showError if any</name>
        <nameStyle>16,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Us0 f37 422 100 36 24 20 -2 #rect
Us0 f37 @|CallSubIcon #fIcon
Us0 f40 expr out #txt
Us0 f40 440 58 440 100 #arcP
Us0 f40 0 0.9047538067742692 0 0 #arcLabel
Us0 f70 expr out #txt
Us0 f70 440 124 357 184 #arcP
Us0 f70 1 440 184 #addKink
Us0 f70 0 0.9047538067742692 0 0 #arcLabel
>Proto Us0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>start/basic events</swimlaneLabel>
        <swimlaneLabel>sub dialogs</swimlaneLabel>
        <swimlaneLabel>manipulation</swimlaneLabel>
        <swimlaneLabel></swimlaneLabel>
    </language>
    <swimlaneOrientation>false</swimlaneOrientation>
    <swimlaneSize>240</swimlaneSize>
    <swimlaneSize>312</swimlaneSize>
    <swimlaneSize>696</swimlaneSize>
    <swimlaneColor>-1</swimlaneColor>
    <swimlaneColor>-16737895</swimlaneColor>
    <swimlaneColor>-6684673</swimlaneColor>
</elementInfo>
' #txt
>Proto Us0 .type ch.ivyteam.ivy.admin.tool.security.Users.UsersData #txt
>Proto Us0 .processKind RICH_DIALOG #txt
>Proto Us0 .ui2RdDataAction 'out.listSelectedUser=panel.usersTable.#selectedListEntries as List<ch.ivyteam.ivy.security.IUser>;
out.selectedUser=panel.usersTable.#selectedListEntry as ch.ivyteam.ivy.security.IUser;
' #txt
>Proto Us0 .rdData2UIAction 'panel.createButton.enabled=in.securityContext.getExternalSecuritySystemProvider().isAdministrationSupported();
panel.deleteButton.enabled=in.listSelectedUser.isEmpty() == false && in.securityContext.getExternalSecuritySystemProvider().isAdministrationSupported();
panel.editButton.enabled=in.#selectedUser != null;
panel.permissionsButton.enabled=in.#selectedUser != null;
panel.propertiesButton.enabled=in.#selectedUser != null;
panel.rolesButton.enabled=in.#selectedUser != null;
panel.systemPermissionButton.enabled=in.#selectedUser != null;
panel.usersTable.listData=in.users;
' #txt
>Proto Us0 -8 -8 16 16 16 26 #rect
>Proto Us0 '' #fIcon
Us0 f3 mainOut f5 tail #connect
Us0 f5 head f4 mainIn #connect
Us0 f0 mainOut f6 tail #connect
Us0 f6 head f1 mainIn #connect
Us0 f10 mainOut f12 tail #connect
Us0 f12 head f9 mainIn #connect
Us0 f18 mainOut f20 tail #connect
Us0 f20 head f17 mainIn #connect
Us0 f21 mainOut f30 tail #connect
Us0 f30 head f27 mainIn #connect
Us0 f28 mainOut f33 tail #connect
Us0 f33 head f24 mainIn #connect
Us0 f34 out f38 tail #connect
Us0 f38 head f35 mainIn #connect
Us0 f34 out f39 tail #connect
Us0 f39 head f26 mainIn #connect
Us0 f43 mainOut f45 tail #connect
Us0 f45 head f42 mainIn #connect
Us0 f8 mainOut f47 tail #connect
Us0 f47 head f46 in #connect
Us0 f46 out f11 tail #connect
Us0 f11 head f10 mainIn #connect
Us0 f16 mainOut f49 tail #connect
Us0 f49 head f48 in #connect
Us0 f48 out f19 tail #connect
Us0 f19 head f18 mainIn #connect
Us0 f22 mainOut f51 tail #connect
Us0 f51 head f50 in #connect
Us0 f50 out f32 tail #connect
Us0 f32 head f28 mainIn #connect
Us0 f46 out f52 tail #connect
Us0 f52 head f9 mainIn #connect
Us0 f48 out f53 tail #connect
Us0 f53 head f17 mainIn #connect
Us0 f50 out f54 tail #connect
Us0 f54 head f24 mainIn #connect
Us0 f25 mainOut f56 tail #connect
Us0 f56 head f55 in #connect
Us0 f57 head f26 mainIn #connect
Us0 f41 mainOut f59 tail #connect
Us0 f59 head f58 in #connect
Us0 f58 out f44 tail #connect
Us0 f44 head f43 mainIn #connect
Us0 f58 out f60 tail #connect
Us0 f60 head f42 mainIn #connect
Us0 f64 mainOut f65 tail #connect
Us0 f65 head f62 mainIn #connect
Us0 f61 mainOut f66 tail #connect
Us0 f66 head f63 in #connect
Us0 f63 out f67 tail #connect
Us0 f67 head f64 mainIn #connect
Us0 f63 out f68 tail #connect
Us0 f68 head f62 mainIn #connect
Us0 f71 mainOut f75 tail #connect
Us0 f75 head f74 mainIn #connect
Us0 f74 mainOut f73 tail #connect
Us0 f73 head f72 mainIn #connect
Us0 f1 mainOut f95 tail #connect
Us0 f95 head f94 mainIn #connect
Us0 f94 mainOut f7 tail #connect
Us0 f7 head f2 mainIn #connect
Us0 f27 mainOut f106 tail #connect
Us0 f106 head f23 mainIn #connect
Us0 f31 mainOut f105 tail #connect
Us0 f105 head f98 mainIn #connect
Us0 f13 mainOut f110 tail #connect
Us0 f110 head f14 mainIn #connect
Us0 f97 mainOut f112 tail #connect
Us0 f112 head f96 mainIn #connect
Us0 f118 mainOut f111 tail #connect
Us0 f111 head f97 mainIn #connect
Us0 f113 mainOut f120 tail #connect
Us0 f120 head f118 mainIn #connect
Us0 f55 out f82 tail #connect
Us0 f82 head f81 mainIn #connect
Us0 f55 out f57 tail #connect
Us0 f81 mainOut f79 tail #connect
Us0 f79 head f78 in #connect
Us0 f36 head f29 mainIn #connect
Us0 f78 out f84 tail #connect
Us0 f84 head f83 mainIn #connect
Us0 f78 out f36 tail #connect
Us0 f83 mainOut f80 tail #connect
Us0 f80 head f26 mainIn #connect
Us0 f29 mainOut f85 tail #connect
Us0 f85 head f34 in #connect
Us0 f35 mainOut f86 tail #connect
Us0 f86 head f77 mainIn #connect
Us0 f77 mainOut f76 tail #connect
Us0 f76 head f26 mainIn #connect
Us0 f69 mainOut f40 tail #connect
Us0 f40 head f37 mainIn #connect
Us0 f37 mainOut f70 tail #connect
Us0 f70 head f14 mainIn #connect
